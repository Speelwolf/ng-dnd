"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[468],{48468:(Z,g,s)=>{s.r(g),s.d(g,{DragLayerModule:()=>L});var c=s(22031),u=s(46260),l=s(4730),t=s(16355),y=s(74967),h=s(90594),x=s(76801);let d=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-box"]],inputs:{title:"title"},decls:2,vars:1,template:function(e,o){1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu(o.title))},styles:["div[_ngcontent-%COMP%]{border:1px dashed grey;cursor:move;padding:.5rem 1rem}"]}),n})(),C=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-box-drag-preview"]],inputs:{title:"title"},decls:2,vars:1,consts:[[1,"phresh"],[3,"title"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-box",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("title",o.title))},directives:[d],styles:["[_nghost-%COMP%]{display:inline-block}@-webkit-keyframes animatedBackground{0%{background:yellow}to{background:white}}@keyframes animatedBackground{0%{background:yellow}to{background:white}}.phresh[_ngcontent-%COMP%]{background:white;transform:rotate(-10deg);overflow:hidden;-webkit-animation-name:animatedBackground;animation-name:animatedBackground;-webkit-animation-duration:.7s;animation-duration:.7s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-direction:alternate;animation-direction:alternate}"]}),n})();function v(n,i){if(1&n&&(t.ynx(0),t._UZ(1,"app-box-drag-preview",5),t.BQk()),2&n){const e=t.oxw(2).ngIf;t.xp6(1),t.Q6J("title",e.item.title)}}function D(n,i){if(1&n&&(t.TgZ(0,"div",2),t.ALo(1,"async"),t.ynx(2,3),t.YNc(3,v,2,1,"ng-container",4),t.BQk(),t.qZA()),2&n){const e=t.oxw().ngIf,o=t.oxw();t.Q6J("ngStyle",t.lcZ(1,3,o.forStyle$)),t.xp6(2),t.Q6J("ngSwitch",e.itemType),t.xp6(1),t.Q6J("ngSwitchCase","BOX")}}function b(n,i){if(1&n&&(t.ynx(0),t.YNc(1,D,4,5,"div",1),t.BQk()),2&n){const e=i.ngIf;t.xp6(1),t.Q6J("ngIf",e.isDragging)}}let T=(()=>{class n{constructor(e){this.dnd=e,this.dragLayer=this.dnd.dragLayer(),this.collect$=this.dragLayer.listen(o=>({item:o.getItem(),itemType:o.getItemType(),isDragging:o.isDragging(),initialOffset:o.getInitialSourceClientOffset(),currentOffset:o.getSourceClientOffset()})),this.forStyle$=this.collect$.pipe((0,h.h)(o=>o.isDragging),(0,x.U)(o=>this.getItemStyles(o))),this.snapToGrid=!1}ngOnInit(){}ngOnDestroy(){this.dragLayer.unsubscribe()}getItemStyles({initialOffset:e,currentOffset:o}){if(!e||!o)return{display:"none"};let{x:a,y:r}=o;this.snapToGrid&&(a-=e.x,r-=e.y,[a,r]=function f(n,i){return[32*Math.round(n/32),32*Math.round(i/32)]}(a,r),a+=e.x,r+=e.y);const p=`translate(${a}px, ${r}px)`;return{transform:p,WebkitTransform:p}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.fD))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-custom-drag-layer"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"ngStyle",4,"ngIf"],[3,"ngStyle"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"title"]],template:function(e,o){1&e&&(t.YNc(0,b,2,1,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,o.collect$))},directives:[c.O5,c.PC,c.RF,c.n9,C],pipes:[c.Ov],styles:["[_nghost-%COMP%]{display:block;position:fixed;pointer-events:none;z-index:100;left:0;top:0;width:100%;height:100%}"],changeDetection:0}),n})();var m=s(10231),w=s(41493);let B=(()=>{class n{constructor(e){this.dnd=e,this.source=this.dnd.dragSource("BOX",{beginDrag:()=>{const{id:o,title:a,left:r,top:p}=this;return{id:o,title:a,left:r,top:p}}}),this.isDragging$=this.source.listen(o=>o.isDragging())}ngOnInit(){this.source.connectDragPreview((0,w.r)(),{captureDraggingState:!0})}ngOnDestroy(){this.source.unsubscribe()}getStyles(e){const{left:o,top:a}=this,r=`translate3d(${o}px, ${a}px, 0)`;return{position:"absolute",transform:r,WebkitTransform:r,opacity:e?0:null,height:e?0:null}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.fD))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-draggable-box"]],inputs:{id:"id",title:"title",left:"left",top:"top"},decls:3,vars:5,consts:[[1,"draggable-box",3,"dragSource","ngStyle"],[3,"title"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.ALo(1,"async"),t._UZ(2,"app-box",1),t.qZA()),2&e&&(t.Q6J("dragSource",o.source)("ngStyle",o.getStyles(!!t.lcZ(1,3,o.isDragging$))),t.xp6(2),t.Q6J("title",o.title))},directives:[m.$d,c.PC,d],pipes:[c.Ov],encapsulation:2,changeDetection:0}),n})(),S=(()=>{class n{constructor(e){this.dnd=e,this.x=30,this.y=90,this.styles={minHeight:"300px",maxWidth:"400px",maxHeight:"400px",width:"100%",height:"100%",boxSizing:"border-box",border:"1px solid black",position:"relative"},this.boxTarget=this.dnd.dropTarget("BOX",{drop:o=>{const a=o.getDifferenceFromInitialOffset(),r=o.getItem();this.moveBox(r.id,r.left+a.x,r.top+a.y)}})}moveBox(e,o,a){this.x=o,this.y=a}ngOnInit(){}ngOnDestroy(){this.boxTarget.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.fD))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-drag-container"]],decls:2,vars:5,consts:[[3,"ngStyle","dropTarget"],["title","this box is titled",3,"left","top","id"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-draggable-box",1),t.qZA()),2&e&&(t.Q6J("ngStyle",o.styles)("dropTarget",o.boxTarget),t.xp6(1),t.Q6J("left",o.x)("top",o.y)("id",23))},directives:[c.PC,m.Li,B],encapsulation:2}),n})(),k=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-drag-layer-container"]],decls:3,vars:0,consts:[["path","drag-layer"]],template:function(e,o){1&e&&t._UZ(0,"app-example-link",0)(1,"app-custom-drag-layer")(2,"app-drag-container")},directives:[y.Z,T,S],encapsulation:2}),n})();var I=s(10009);let L=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.ez,l.c8,u.Bz.forChild([{path:"",component:k}]),I.g]]}),n})()}}]);