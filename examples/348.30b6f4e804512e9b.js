"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[348],{25348:(ft,I,o)=>{o.r(I),o.d(I,{routes:()=>mt});var t=o(81072),D=o(87567),d=o(44387);const m={CARD:"KANBAN_CARD",LIST:"KANBAN_LIST"};var u=o(54739),j=o(1574),f=o(62414);let y=(()=>{class e{constructor(){this.preview=!1,this.placeholder=!1}static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["kanban-card"]],inputs:{card:"card",preview:"preview",placeholder:"placeholder"},standalone:!0,features:[t.aNF],decls:3,vars:5,consts:[[1,"card"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"p"),t.EFF(2),t.k0s()()),2&n&&(t.AVh("card--preview",i.preview)("card--placeholder",i.placeholder),t.R7$(2),t.JRh(i.card.title))},styles:['[_nghost-%COMP%]{display:block}*[_ngcontent-%COMP%]{box-sizing:border-box}.card[_ngcontent-%COMP%]{padding:8px;border-radius:4px;position:relative;-webkit-user-select:none;user-select:none;background:#fff;box-shadow:0 1px 3px #00000014,0 1px 2px #00000029}.card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.card--preview[_ngcontent-%COMP%]{transform:rotate(-2deg);width:100%;height:100%;box-shadow:0 8px 16px #00000040,0 6px 6px #00000021}.card--placeholder[_ngcontent-%COMP%]{background:none;box-shadow:none}.card--placeholder[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:hidden}.card--placeholder[_ngcontent-%COMP%]:before{content:"";border-radius:4px;background:#00000021;box-shadow:inset 0 3px 7px #00000021,inset 0 1px 3px #00000038;position:absolute;top:0;left:0;width:100%;height:100%}']})}return e})();var c=o(78710),l=o(58203);function C(e,a){const r=e.slice(0);return a(r),r}function F(e,a,r){const n=e.findIndex(s=>s.id===a);if(-1===n)return e;const i={...e[n],cards:C(e[n].cards,r)};return C(e,s=>{s.splice(n,1,i)})}function w(e,a,r){return C(e,n=>{n.splice(r,0,a)})}function R(e,a){return C(e,r=>{r.splice(a,1)})}function T(e,a,r){return F(e,a,n=>{n.splice(r,1)})}function _(e,a,r,n){return F(e,r,i=>{i.splice(n,0,a)})}const E=[{id:0,title:"To Do",cards:[{id:1,title:l.lorem.sentence()},{id:2,title:l.lorem.sentence()},{id:3,title:l.lorem.sentence()},{id:4,title:l.lorem.sentence()},{id:5,title:"This card is a bigger than the other ones. "+l.lorem.sentence()+" "+l.lorem.sentence()}]},{id:1,title:"Doing",cards:[{id:6,title:l.company.bs()},{id:7,title:l.company.bs()},{id:8,title:l.company.bs()},{id:9,title:l.company.bs()},{id:10,title:l.company.bs()}]},{id:2,title:"Done",cards:[{id:11,title:l.name.jobTitle()},{id:12,title:l.name.jobTitle()},{id:13,title:l.name.jobTitle()},{id:14,title:l.name.jobTitle()},{id:15,title:l.name.jobTitle()}]}];var g=function(e){return e.SortList="[Kanban] SortList",e.SortCard="[Kanban] SortCard",e.AddCard="[Kanban] AddCard",e.RemoveCard="[Kanban] RemoveCard",e.Spill="[Kanban] Spill",e}(g||{});class G{constructor(a,r){this.listId=a,this.title=r,this.type=g.AddCard}}class L{constructor(a){this.item=a,this.type=g.RemoveCard}}class K{constructor(a){this.item=a,this.type=g.Spill}}const A={board:E,draggingBoard:null,cardInFlight:null,listInFlight:null,nextId:1e3,spilledCard:!1,isCopying:!1,shouldCopy:!1},b=e=>({...e,draggingBoard:null,cardInFlight:null,listInFlight:null,isCopying:!1,spilledCard:!1}),S=Symbol("CLONED_CARD"),O=(e,a)=>({...e,id:a}),M=(e,a)=>{let{board:r,nextId:n}=e;if(e.cardInFlight){const{data:i,hover:s}=e.cardInFlight;if(e.isCopying)n++,r=e.spilledCard?e.board:_(e.board,a,s.listId,s.index);else{const p=e.draggingBoard||e.board;r=e.spilledCard?p:_(p,i,s.listId,s.index)}}return{...b(e),board:r,nextId:n}},x=(0,c.UX)("kanban"),P=(0,c.Mz)(x,e=>e.isCopying),Y=(0,c.Mz)(x,e=>e.cardInFlight),z=(0,c.Mz)(P,Y,(e,a)=>e&&a?O(a.data,S):null),H=(0,c.Mz)(x,e=>e.board),V=(0,c.Mz)(x,z,(e,a)=>{const{cardInFlight:r,listInFlight:n}=e,i=e.draggingBoard||e.board;if(null!=r)return M(e,a).board;if(null!=n){const{hover:s,data:p}=n;return w(i,p,s.index)}return i});var J=o(67370);let v=(()=>{class e{constructor(r){this.store=r,this.boardSpec=new d.or(this.store,g.SortList,{type:m.LIST,trackBy:n=>n.id,getList:n=>this.store.pipe((0,c.Lt)(V))}),this.isCopying=!1,this.subs=this.store.pipe((0,c.Lt)(P)).subscribe(n=>this.isCopying=n),this.listSpec=new d.or(this.store,g.SortCard,{type:m.CARD,trackBy:n=>n.id,getList:n=>this.store.pipe((0,c.Lt)((e=>(0,c.Mz)(H,a=>{const r=a.find(n=>n.id===e);return r&&r.cards}))(n)),(0,J.p)(i=>null!=i)),isDragging:(n,i)=>n.id===(this.isCopying?S:i.data.id)})}ngOnDestroy(){this.subs.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||e)(t.KVO(c.il))};static#e=this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac})}return e})();var Q=o(68422),k=o(90789);let W=(()=>{class e{constructor(r){this.specs=r,this.ItemTypes=m,this.card={id:1337,title:"External card - drag me in!"},this.nextId=3e6,this.externalSpec={...this.specs.listSpec,beginDrag:()=>{},createData:()=>({id:this.nextId++,title:this.card.title})}}static#t=this.\u0275fac=function(n){return new(n||e)(t.rXU(v))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["kanban-external"]],standalone:!0,features:[t.aNF],decls:3,vars:4,consts:[["ext","dndSortableExternal"],[1,"ext"],[3,"dndSortableExternal","card","dragSource","noHTML5Preview"]],template:function(n,i){if(1&n&&(t.j41(0,"div",1),t.nrm(1,"kanban-card",2,0),t.k0s()),2&n){const s=t.sdS(2);t.R7$(),t.Y8G("dndSortableExternal",i.externalSpec)("card",i.card)("dragSource",s.source)("noHTML5Preview",!0)}},dependencies:[y,d.p8,Q.Y,f.JG,k.LQ],styles:[".ext[_ngcontent-%COMP%]{margin-right:8px;margin-bottom:8px;display:inline-block}"]})}return e})();var h=o(93779);let Z=(()=>{class e{constructor(){this.add=new t.bkB,this.addForm=new h.gE({title:new h.MJ})}onSubmit(){this.add.emit(this.addForm.get("title")?.value),this.addForm.reset()}static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["kanban-add-card"]],outputs:{add:"add"},standalone:!0,features:[t.aNF],decls:2,vars:1,consts:[[3,"formGroup"],["placeholder","Add a card","formControlName","title",1,"title",3,"keyup.enter"]],template:function(n,i){1&n&&(t.j41(0,"form",0)(1,"input",1),t.bIt("keyup.enter",function(){return i.onSubmit()}),t.k0s()()),2&n&&t.Y8G("formGroup",i.addForm)},dependencies:[h.X1,h.qT,h.me,h.BC,h.cb,h.j4,h.JD],styles:[".title[_ngcontent-%COMP%]{box-sizing:border-box;border:none;width:100%;background:#0000;padding:6px 8px}.title[_ngcontent-%COMP%]:focus{background:#fff}"]})}return e})();var q=o(6295),B=o(67984);function tt(e,a){if(1&e&&(t.nrm(0,"kanban-card",9,2),t.nI1(2,"async")),2&e){const r=a.$implicit,n=a.index,i=t.sdS(1);t.XpG();const s=t.sdS(1);t.Y8G("card",r)("dndSortableRender",s.contextFor(r,n))("dragSource",i.source)("noHTML5Preview",!0)("placeholder",!!t.bMT(2,5,i.isDragging$))}}function et(e,a){if(1&e&&(t.j41(0,"div",7,1),t.DNE(2,tt,3,7,"kanban-card",8),t.k0s()),2&e){const r=t.XpG();t.Y8G("spec",r.specs.listSpec)("listId",r.list.id),t.R7$(2),t.Y8G("ngForOf",r.list.cards)("ngForTrackBy",r.trackById)}}function nt(e,a){1&e&&t.nrm(0,"kanban-card",12),2&e&&t.Y8G("card",a.$implicit)}function rt(e,a){if(1&e&&(t.j41(0,"div",10),t.DNE(1,nt,1,1,"kanban-card",11),t.k0s()),2&e){const r=t.XpG();t.R7$(),t.Y8G("ngForOf",r.list.cards)("ngForTrackBy",r.trackById)}}let at=(()=>{class e{constructor(r,n){this.specs=r,this.render=n,this.preview=!1,this.addCard=new t.bkB,this.placeholder$=this.render&&this.render.source.listen(i=>i.isDragging()),this.isOver$=this.render&&this.render.target.listen(i=>i.canDrop()&&i.isOver()),this.trackById=(i,s)=>s.id}ngOnInit(){}static#t=this.\u0275fac=function(n){return new(n||e)(t.rXU(v),t.rXU(d.eP,8))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["kanban-list"]],inputs:{list:"list",preview:"preview"},outputs:{addCard:"addCard"},standalone:!0,features:[t.aNF],decls:9,vars:11,consts:[["plain",""],["clist","dndSortable"],["render","dndSortableRender"],[1,"list"],[1,"handle",3,"dragSource","noHTML5Preview"],["class","cards-container","dndSortable","",3,"spec","listId",4,"ngIf","ngIfElse"],[3,"add"],["dndSortable","",1,"cards-container",3,"spec","listId"],[3,"card","dndSortableRender","dragSource","noHTML5Preview","placeholder",4,"ngFor","ngForOf","ngForTrackBy"],[3,"card","dndSortableRender","dragSource","noHTML5Preview","placeholder"],[1,"cards-container"],[3,"card",4,"ngFor","ngForOf","ngForTrackBy"],[3,"card"]],template:function(n,i){if(1&n){const s=t.RV6();t.j41(0,"div",3),t.nI1(1,"async"),t.j41(2,"div",4)(3,"h3"),t.EFF(4),t.k0s()(),t.DNE(5,et,3,4,"div",5)(6,rt,2,2,"ng-template",null,0,t.C5r),t.j41(8,"kanban-add-card",6),t.bIt("add",function(bt){return t.eBV(s),t.Njj(i.addCard.emit(bt))}),t.k0s()()}if(2&n){const s=t.sdS(7);t.AVh("list--preview",i.preview)("list--placeholder",t.bMT(1,9,null==i.render?null:i.render.isDragging$)),t.R7$(2),t.Y8G("dragSource",null==i.render?null:i.render.source)("noHTML5Preview",!0),t.R7$(2),t.JRh(i.list.title),t.R7$(),t.Y8G("ngIf",i.render)("ngIfElse",s)}},dependencies:[f.JG,k.LQ,d.p8,q.f,B.e,u.bT,u.pM,y,Z,u.Jj],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box}.cards-container[_ngcontent-%COMP%]{min-height:20px}.cards-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-bottom:6px}.list[_ngcontent-%COMP%]{position:relative;width:240px;padding:8px;border-radius:4px;-webkit-user-select:none;user-select:none;background:#eee;box-shadow:0 1px 3px #00000014,0 1px 2px #00000029}.list--preview[_ngcontent-%COMP%]{box-shadow:0 14px 28px #0003,0 10px 10px #0000001a}.list--placeholder[_ngcontent-%COMP%]{background:none;box-shadow:none}.list--placeholder[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:hidden}.list--placeholder[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:#00000021;border-radius:4px;box-shadow:inset 0 3px 7px #00000021,inset 0 1px 3px #00000038}.handle[_ngcontent-%COMP%]{margin:-8px;padding:8px}.handle[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px}'],changeDetection:0})}return e})();function it(e,a){if(1&e&&(t.j41(0,"div",1)(1,"div"),t.nrm(2,"i",2),t.j41(3,"span"),t.EFF(4,"Drop here to delete"),t.k0s()(),t.nrm(5,"div",3),t.k0s()),2&e){const r=a.ngIf,n=t.XpG();t.AVh("isOver",r.isOver),t.Y8G("dropTarget",n.target),t.R7$(5),t.Aen(n.getStyle(r.isOver,r.item))}}let st=(()=>{class e{constructor(r){this.dnd=r,this.dropped=new t.bkB,this.target=this.dnd.dropTarget(m.CARD,{canDrop:n=>n.getItem().isInternal,drop:n=>{this.dropped.emit(n.getItem())}}),this.collect$=this.target.listen(n=>({item:n.getItem(),isOver:n.isOver()&&n.canDrop()}))}getStyle(r,n){return r&&n?{...n.size.style(),transition:"all 50ms ease-in"}:{}}static#t=this.\u0275fac=function(n){return new(n||e)(t.rXU(f.E$))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["kanban-trash-can"]],outputs:{dropped:"dropped"},standalone:!0,features:[t.aNF],decls:2,vars:3,consts:[["class","trash-can",3,"isOver","dropTarget",4,"ngIf"],[1,"trash-can",3,"dropTarget"],[1,"fas","fa-trash-alt"],[1,"space"]],template:function(n,i){1&n&&(t.DNE(0,it,6,5,"div",0),t.nI1(1,"async")),2&n&&t.Y8G("ngIf",t.bMT(1,1,i.collect$))},dependencies:[f.JG,k.wu,u.bT,u.Jj],styles:[".fas[_ngcontent-%COMP%]{margin-right:8px}.trash-can[_ngcontent-%COMP%]{margin:8px;padding:8px;font-weight:700;text-shadow:1px 1px rgba(255,255,255,.2);border-radius:4px;border:1px dashed #333;text-align:center;transform-origin:100% 100%;transition:transform 50ms ease-out}.space[_ngcontent-%COMP%]{height:0;width:0;transition:all 50ms ease-out}.isOver[_ngcontent-%COMP%]{transition:transform 50ms ease-in;background:#fff6;transform:scale(1.2)}"],changeDetection:0})}return e})();var ot=o(86283),dt=o(70897),lt=o(667);function ct(e,a){if(1&e&&t.nrm(0,"kanban-card",8),2&e){const r=t.XpG().item;t.Aen(r.size.style()),t.Y8G("card",r.data)("preview",!0)}}function pt(e,a){if(1&e&&t.nrm(0,"kanban-list",9),2&e){const r=t.XpG().item;t.Aen(r.size.style()),t.Y8G("list",r.data)("preview",!0)}}function gt(e,a){if(1&e&&(t.qex(0,5),t.DNE(1,ct,1,4,"kanban-card",6)(2,pt,1,4,"kanban-list",7),t.bVm()),2&e){const r=a.$implicit,n=t.XpG();t.Y8G("ngSwitch",r),t.R7$(),t.Y8G("ngSwitchCase",n.ItemTypes.CARD),t.R7$(),t.Y8G("ngSwitchCase",n.ItemTypes.LIST)}}function ht(e,a){if(1&e){const r=t.RV6();t.j41(0,"kanban-list",10),t.bIt("addCard",function(i){const s=t.eBV(r).$implicit,p=t.XpG();return t.Njj(p.addCard(s.data.id,i))}),t.k0s()}if(2&e){const r=a.$implicit;t.Y8G("dndSortableRender",r)("list",r.data)}}let ut=(()=>{class e{constructor(r,n){this.store=r,this.specs=n,this.ItemTypes=m,this.hoverTrigger=d.lX.fixed}addCard(r,n){this.store.dispatch(new G(r,n))}removeCard(r){this.store.dispatch(new L(r))}static#t=this.\u0275fac=function(n){return new(n||e)(t.rXU(c.il),t.rXU(v))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["kanban-board"]],standalone:!0,features:[t.aNF],decls:7,vars:5,consts:[[3,"allBackends"],[1,"kanban-root",3,"hoverTrigger","listId","spec","horizontal"],["dndSortableTemplate",""],[1,"trash-zone"],[3,"dropped"],[3,"ngSwitch"],[3,"card","preview","style",4,"ngSwitchCase"],[3,"list","preview","style",4,"ngSwitchCase"],[3,"card","preview"],[3,"list","preview"],[3,"addCard","dndSortableRender","list"]],template:function(n,i){1&n&&(t.j41(0,"dnd-preview",0),t.DNE(1,gt,3,3,"ng-template"),t.k0s(),t.j41(2,"dnd-sortable-list",1),t.DNE(3,ht,1,2,"ng-template",2),t.k0s(),t.j41(4,"div",3)(5,"kanban-trash-can",4),t.bIt("dropped",function(p){return i.removeCard(p)}),t.k0s(),t.nrm(6,"kanban-external"),t.k0s()),2&n&&(t.Y8G("allBackends",!0),t.R7$(2),t.Y8G("hoverTrigger",i.hoverTrigger)("listId",888)("spec",i.specs.boardSpec)("horizontal",!0))},dependencies:[j._X,ot.J,d.p8,dt.z,lt.r,B.e,u.ux,u.e1,y,at,W,st],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}.kanban-root[_ngcontent-%COMP%]{background:#828cca;flex:1;display:flex;min-height:500px;overflow-x:scroll;padding:8px;justify-content:flex-start}.kanban-root[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:8px}.trash-zone[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;text-align:right}"],changeDetection:0})}return e})();const mt=[{path:"",component:(()=>{class e{constructor(r,n,i){this.dnd=r,this.el=n,this.store=i,this.cardSpill=(0,d.gh)(this.dnd,m.CARD,{hover:s=>this.store.dispatch(new K(s))})}ngAfterViewInit(){this.cardSpill.connectDropTarget(this.el.nativeElement)}ngOnDestroy(){this.cardSpill.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||e)(t.rXU(f.E$),t.rXU(t.aKT),t.rXU(c.il))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["kanban-container"]],standalone:!0,features:[t.aNF],decls:20,vars:0,consts:[[1,"text"],["path","sortable/kanban"],[1,"span","span--darkblue"],[1,"span","span--light"],[1,"relative"]],template:function(n,i){1&n&&(t.j41(0,"div",0),t.nrm(1,"app-example-link",1),t.j41(2,"p"),t.EFF(3," This example uses "),t.j41(4,"code"),t.EFF(5,"@ng-dnd/sortable"),t.k0s(),t.EFF(6,". There are two kinds of sortable in play here: "),t.k0s(),t.j41(7,"ul")(8,"li"),t.EFF(9,"One "),t.j41(10,"span",2),t.EFF(11,"horizontal"),t.k0s(),t.EFF(12," one, whose 'cards' are the vertical lists. Try grabbing a whole list by its header, and reordering. "),t.k0s(),t.j41(13,"li"),t.EFF(14,"Many "),t.j41(15,"span",3),t.EFF(16,"vertical"),t.k0s(),t.EFF(17," ones, which contain the kanban cards. Try moving the cards between lists. "),t.k0s()()(),t.j41(18,"div",4),t.nrm(19,"kanban-board"),t.k0s())},dependencies:[D.G,ut],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}[_nghost-%COMP%]{display:flex;flex-direction:column}.relative[_ngcontent-%COMP%]{position:relative}.text[_ngcontent-%COMP%]{background:#fff;max-width:800px}.span[_ngcontent-%COMP%]{border-radius:4px;padding:0 2px}.span--darkblue[_ngcontent-%COMP%]{background:#828cca;color:#fff}.span--light[_ngcontent-%COMP%]{background:#eee;color:#000;box-shadow:0 1px 3px #00000014,0 1px 2px #00000029}"]})}return e})(),providers:[(0,t.oKB)([c.md.forFeature("kanban",function X(e=A,a){const r=e.draggingBoard||e.board;switch(a.type){case g.SortList:return function N(e,a){const r=e.draggingBoard||e.board,{data:n,index:i,hover:p}=a.item;switch(a.event){case d.sH.BeginDrag:return{...e,draggingBoard:R(e.board,i),listInFlight:a.item};case d.sH.Hover:return{...e,listInFlight:a.item};case d.sH.Drop:return{...b(e),board:w(r,n,p.index)};case d.sH.EndDrag:return b(e);default:return e}}(e,a);case g.SortCard:return function $(e,a){const{index:n,listId:i}=a.item;switch(e={...e,spilledCard:!1},a.event){case d.sH.BeginDrag:return{...e,draggingBoard:T(e.board,i,n),cardInFlight:a.item,isCopying:e.shouldCopy&&1===i};case d.sH.Hover:return{...e,cardInFlight:a.item};case d.sH.Drop:return M(e,O(e.cardInFlight.data,e.nextId));case d.sH.EndDrag:return b(e);default:return e}}(e,a);case g.AddCard:{const n={id:e.nextId,title:a.title},s=r.find(p=>p.id===a.listId).cards.length;return{...b(e),board:_(e.board,n,a.listId,s),nextId:e.nextId+1}}case g.RemoveCard:{const{listId:n,index:i}=a.item;return{...b(e),board:T(e.board,n,i)}}case g.Spill:return{...e,spilledCard:!0,cardInFlight:a.item};default:return e}})]),v]}]}}]);