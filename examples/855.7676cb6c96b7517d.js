"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[855],{34855:(N,b,r)=>{r.r(b),r.d(b,{KanbanModule:()=>F});var s=r(17011),w=r(10009),u=r(4730),S=r(14595),M=r(25568),O=r(62359),l=r(61569);const p={LIST:"SIMPLE_KANBAN_LIST",CARD:"SIMPLE_KANBAN_CARD"};var e=r(31385),Z=r(74967),x=r(72820);let h=(()=>{class t{constructor(){this.initialTree=[{id:1,title:"To Do",cards:[{listId:1,id:10,title:"Write a new song"},{listId:1,id:20,title:"Put the lyrics to music"}]},{id:2,title:"Doing",cards:[{listId:2,id:30,title:"Rig up the speakers"}]},{id:3,title:"Done",cards:[]}],this.savedTree=this.initialTree,this.tree=this.initialTree,this.boardSpec={type:p.LIST,trackBy:n=>n.id,hover:n=>{this.tree=this.moveList(n)},drop:n=>{this.tree=this.savedTree=this.moveList(n)},endDrag:n=>{this.tree=this.savedTree}},this.listSpec={type:p.CARD,trackBy:n=>n.id,hover:n=>{this.tree=this.moveCard(n)},drop:n=>{this.tree=this.savedTree=this.moveCard(n)},endDrag:n=>{this.tree=this.savedTree}}}moveList(n){return(0,x.Uy)(this.savedTree,a=>{n.isInternal&&a.splice(n.index,1),a.splice(n.hover.index,0,n.data)})}moveCard(n){return(0,x.Uy)(this.savedTree,a=>{const{listId:i,index:d}=n,{listId:c,index:g}=n.hover;console.info("from",i,d,"to",c,g);const _=a.find(m=>m.id===i),y=a.find(m=>m.id===c);if(!_||(n.isInternal&&_.cards.splice(d,1),!y))return;const Y={...n.data,listId:c};y.cards.splice(g,0,Y)})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();var P=r(59857),v=r(43554),C=r(64365),f=r(48307),k=r(10231);let T=(()=>{class t{constructor(){this.preview=!1,this.placeholder=!1}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["kanban-card"]],inputs:{card:"card",preview:"preview",placeholder:"placeholder"},decls:3,vars:5,consts:[[1,"card"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0)(1,"p"),e._uU(2),e.qZA()()),2&n&&(e.ekj("card--preview",a.preview)("card--placeholder",a.placeholder),e.xp6(2),e.Oqu(a.card.title))},styles:['[_nghost-%COMP%]{display:block}*[_ngcontent-%COMP%]{box-sizing:border-box}.card[_ngcontent-%COMP%]{padding:8px;border-radius:4px;position:relative;-webkit-user-select:none;user-select:none;background:#fff;box-shadow:0 1px 3px #00000014,0 1px 2px #00000029}.card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.card--preview[_ngcontent-%COMP%]{transform:rotate(-2deg);width:100%;height:100%;box-shadow:0 8px 16px #00000040,0 6px 6px #00000021}.card--placeholder[_ngcontent-%COMP%]{background:none;box-shadow:none}.card--placeholder[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:hidden}.card--placeholder[_ngcontent-%COMP%]:before{content:"";border-radius:4px;background:rgba(0,0,0,.13);box-shadow:inset 0 3px 7px #00000021,inset 0 1px 3px #00000038;position:absolute;top:0;left:0;width:100%;height:100%}']}),t})();function A(t,o){if(1&t&&(e._UZ(0,"kanban-card",5,6),e.ALo(2,"async")),2&t){const n=o.$implicit,a=e.MAs(1);e.Q6J("dndSortableRender",n)("dragSource",a.source)("card",n.data)("noHTML5Preview",!0)("placeholder",!!e.lcZ(2,5,a.isDragging$))}}function I(t,o){1&t&&e._UZ(0,"kanban-card",9),2&t&&e.Q6J("card",o.$implicit)}function K(t,o){if(1&t&&(e.TgZ(0,"div",7),e.YNc(1,I,1,1,"kanban-card",8),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.list.cards)("ngForTrackBy",n.trackById)}}let U=(()=>{class t{constructor(n,a){this.specs=n,this.render=a,this.preview=!1,this.addCard=new e.vpe,this.placeholder$=this.render&&this.render.source.listen(i=>i.isDragging()),this.isOver$=this.render&&this.render.target.listen(i=>i.canDrop()&&i.isOver()),this.trackById=(i,d)=>d.id}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(h),e.Y36(l.UH,8))},t.\u0275cmp=e.Xpm({type:t,selectors:[["kanban-list"]],inputs:{list:"list",preview:"preview"},outputs:{addCard:"addCard"},decls:9,vars:12,consts:[[1,"list"],[1,"handle",3,"dragSource","noHTML5Preview"],[1,"cards-container",3,"spec","children","listId"],["dndSortableTemplate",""],["plain",""],[3,"dndSortableRender","dragSource","card","noHTML5Preview","placeholder"],["render","dndSortableRender"],[1,"cards-container"],[3,"card",4,"ngFor","ngForOf","ngForTrackBy"],[3,"card"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0),e.ALo(1,"async"),e.TgZ(2,"div",1)(3,"h3"),e._uU(4),e.qZA()(),e.TgZ(5,"dnd-sortable-list",2),e.YNc(6,A,3,7,"ng-template",3),e.qZA(),e.YNc(7,K,2,2,"ng-template",null,4,e.W1O),e.qZA()),2&n&&(e.ekj("list--preview",a.preview)("list--placeholder",e.lcZ(1,10,a.render.isDragging$)),e.xp6(2),e.Q6J("dragSource",a.render.source)("noHTML5Preview",!0),e.xp6(2),e.Oqu(a.list.title),e.xp6(1),e.Q6J("spec",a.specs.listSpec)("children",a.list.cards)("listId",a.list.id))},dependencies:[s.sg,k.$d,v.J,C.S,f.U,T,s.Ov],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box}.cards-container[_ngcontent-%COMP%]{min-height:20px}.cards-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-bottom:6px}.list[_ngcontent-%COMP%]{position:relative;width:240px;padding:8px;border-radius:4px;-webkit-user-select:none;user-select:none;background:#eee;box-shadow:0 1px 3px #00000014,0 1px 2px #00000029}.list--preview[_ngcontent-%COMP%]{box-shadow:0 14px 28px #0003,0 10px 10px #0000001a}.list--placeholder[_ngcontent-%COMP%]{background:none;box-shadow:none}.list--placeholder[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:hidden}.list--placeholder[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.13);border-radius:4px;box-shadow:inset 0 3px 7px #00000021,inset 0 1px 3px #00000038}.handle[_ngcontent-%COMP%]{margin:-8px;padding:8px}.handle[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px}']}),t})();function L(t,o){if(1&t&&e._UZ(0,"kanban-card",6),2&t){const n=e.oxw().item;e.Q6J("card",n.data)("preview",!0)("ngStyle",n.size.style())}}function B(t,o){if(1&t&&e._UZ(0,"kanban-list",7),2&t){const n=e.oxw().item;e.Q6J("list",n.data)("preview",!0)("ngStyle",n.size.style())}}function D(t,o){if(1&t&&(e.ynx(0,3),e.YNc(1,L,1,3,"kanban-card",4),e.YNc(2,B,1,3,"kanban-list",5),e.BQk()),2&t){const n=o.$implicit,a=e.oxw();e.Q6J("ngSwitch",n),e.xp6(1),e.Q6J("ngSwitchCase",a.ItemTypes.CARD),e.xp6(1),e.Q6J("ngSwitchCase",a.ItemTypes.LIST)}}function J(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"kanban-list",8),e.NdJ("addCard",function(i){const c=e.CHM(n).$implicit,g=e.oxw();return e.KtG(g.addCard(c.data.id,i))}),e.qZA()}if(2&t){const n=o.$implicit;e.Q6J("dndSortableRender",n)("list",n.data)}}let Q=(()=>{class t{constructor(n){this.specs=n,this.ItemTypes=p,this.hoverTrigger=l.SO.fixed}addCard(n,a){}removeCard(n){}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(h))},t.\u0275cmp=e.Xpm({type:t,selectors:[["kanban-board"]],decls:4,vars:6,consts:[[3,"allBackends"],[1,"kanban-root",3,"hoverTrigger","listId","children","spec","horizontal"],["dndSortableTemplate",""],[3,"ngSwitch"],[3,"card","preview","ngStyle",4,"ngSwitchCase"],[3,"list","preview","ngStyle",4,"ngSwitchCase"],[3,"card","preview","ngStyle"],[3,"list","preview","ngStyle"],[3,"dndSortableRender","list","addCard"]],template:function(n,a){1&n&&(e.TgZ(0,"dnd-preview",0),e.YNc(1,D,3,3,"ng-template"),e.qZA(),e.TgZ(2,"dnd-sortable-list",1),e.YNc(3,J,1,2,"ng-template",2),e.qZA()),2&n&&(e.Q6J("allBackends",!0),e.xp6(2),e.Q6J("hoverTrigger",a.hoverTrigger)("listId",888)("children",a.specs.tree)("spec",a.specs.boardSpec)("horizontal",!0))},dependencies:[s.PC,s.RF,s.n9,P.S,v.J,C.S,f.U,U,T],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}.kanban-root[_ngcontent-%COMP%]{background:#50ddb0;flex:1;display:flex;min-height:500px;overflow-x:scroll;padding:8px;justify-content:flex-start}.kanban-root[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:8px}.trash-zone[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;text-align:right}"]}),t})(),z=(()=>{class t{constructor(n,a){this.dnd=n,this.el=a,this.cardSpill=(0,l.De)(this.dnd,p.CARD,{})}ngAfterViewInit(){}ngOnDestroy(){this.cardSpill.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(u.fD),e.Y36(e.SBq))},t.\u0275cmp=e.Xpm({type:t,selectors:[["kanban-container"]],decls:26,vars:0,consts:[[1,"text"],["path","sortable/simple-kanban"],[1,"span","span--darkblue"],[1,"span","span--light"],[1,"relative"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-example-link",1),e.TgZ(2,"p"),e._uU(3," This example uses "),e.TgZ(4,"code"),e._uU(5,"@ng-dnd/sortable"),e.qZA(),e._uU(6,". It's similar to the other one, but doesn't use "),e.TgZ(7,"code"),e._uU(8,"@ngrx"),e.qZA(),e._uU(9,", just "),e.TgZ(10,"code"),e._uU(11,"Immer"),e.qZA(),e._uU(12,". There are two kinds of sortable in play here: "),e.qZA(),e.TgZ(13,"ul")(14,"li"),e._uU(15,"One "),e.TgZ(16,"span",2),e._uU(17,"horizontal"),e.qZA(),e._uU(18," one, whose 'cards' are the vertical lists. Try grabbing a whole list by its header, and reordering. "),e.qZA(),e.TgZ(19,"li"),e._uU(20,"Many "),e.TgZ(21,"span",3),e._uU(22,"vertical"),e.qZA(),e._uU(23," ones, which contain the kanban cards. Try moving the cards between lists. "),e.qZA()()(),e.TgZ(24,"div",4),e._UZ(25,"kanban-board"),e.qZA())},dependencies:[Z.Z,Q],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}[_nghost-%COMP%]{display:flex;flex-direction:column}.relative[_ngcontent-%COMP%]{position:relative}.text[_ngcontent-%COMP%]{background:#fff;max-width:800px}.span[_ngcontent-%COMP%]{border-radius:4px;padding:0 2px}.span--darkblue[_ngcontent-%COMP%]{background:#50ddb0;color:#fff}.span--light[_ngcontent-%COMP%]{background:#eee;color:#000;box-shadow:0 1px 3px #00000014,0 1px 2px #00000029}"],changeDetection:0}),t})(),F=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[h],imports:[s.ez,w.g,u.c8,O.XJ,l.tG,M.UX,S.Bz.forChild([{path:"",component:z}])]}),t})()}}]);