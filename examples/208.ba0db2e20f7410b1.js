"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[208],{44208:(Nn,y,i)=>{i.r(y),i.d(y,{DrilldownModule:()=>wn});var a=i(22031),I=i(46260),p=i(4730),n=i(16355),N=i(65780),L=i(31777),U=i(3562),P=i(71503),d=i(17215),v=i(26109),E=i(45226),x=i(48586),C=i(88190);const J={connector:()=>new v.x};function Q(e,s,t,o){t&&!(0,d.m)(t)&&(o=t);const r=(0,d.m)(t)?t:void 0;return c=>function Y(e,s){const t=(0,d.m)(e)?e:()=>e;return(0,d.m)(s)?function G(e,s=J){const{connector:t}=s;return(0,x.e)((o,r)=>{const c=t();(0,E.D)(e(function B(e){return new C.y(s=>e.subscribe(s))}(c))).subscribe(r),r.add(o.subscribe(c))})}(s,{connector:t}):o=>new P.c(o,t)}(new U.t(e,s,o),r)(c)}var R=i(84443),g=i(76801),h=i(48045),K=i(84985);const D="BEGIN_DRAG",O="END_DRAG",A="OPEN_TRANSIENT",T="DROP",Z="TOGGLE";class z{constructor(){this.type=D}}class S{constructor(){this.type=O}}class W{constructor(s){this.keys=s,this.type=A}}class X{constructor(s){this.keys=s,this.type=T}}class H{constructor(s){this.keys=s,this.type=Z}}const b={structure:{Infraction:{Anecdotal:{Clumsily:{},Megalomaniac:{},Neurotic:{}},Basilica:{Salivate:{}},Candid:{Granada:{}}},Magnanimous:{Jalape\u00f1o:{Poppers:{}},Jalape\u00f1o2:{Poppers3:{}}},Byzantine:{Fault:{Tolerance:{}},Armadillo:{Farming:{}}}},open:{Infraction:!0,"Infraction.Basilica":!0,"Infraction.Basilica.Salivate":!0},preDragOpen:{}};let u=(()=>{class e{constructor(){this.actions$=new K.X({type:"@@init"}),this.store$=this.actions$.pipe((0,N.R)(e.reducer,b),(0,L.O)(b),Q(),(0,R.x)())}static makeKey(t){return t.join(".")}static toggleSingle(t,o){const r=e.makeKey(o);return Object.assign({},t,{[r]:!t[r]})}static openAllAncestors(t,o){t=Object.assign({},t);for(let r=0;r<o.length;r++)t[e.makeKey(o.slice(0,r+1))]=!0;return t}static reducer(t,o){switch(o.type){case D:return Object.assign(Object.assign({},t),{preDragOpen:t.open});case O:return Object.assign(Object.assign({},t),{open:t.preDragOpen});case A:return Object.assign(Object.assign({},t),{open:e.openAllAncestors(t.preDragOpen,o.keys)});case T:return Object.assign(Object.assign({},t),{lastDrop:o.keys});case Z:return Object.assign(Object.assign({},t),{open:e.toggleSingle(t.open,o.keys)});default:return t}}static recursiveGet(t,o){return 0===o.length?t:e.recursiveGet(t[o[0]],o.slice(0).splice(1))}select(t){return this.store$.pipe((0,g.U)(t),(0,h.x)())}isOpen(t){return this.select(o=>null==t||0===t.length||o.open[e.makeKey(t)])}getChildren(t){return this.select(o=>o).pipe((0,g.U)(o=>{const r=e.recursiveGet(o.structure,t);return Object.keys(r).sort()}))}beginDrag(){this.actions$.next(new z)}endDrag(){this.actions$.next(new S)}toggle(t){this.actions$.next(new H(t))}openTransient(t){this.actions$.next(new W(t))}drop(t){this.actions$.next(new X(t))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();var V=i(74967),q=i(148);var $=i(10231);let _=(()=>{class e{constructor(t){this.dnd=t,this.beginDrag=new n.vpe,this.endDrag=new n.vpe,this.source=this.dnd.dragSource("EMAIL",{beginDrag:()=>(this.beginDrag.emit(),{}),endDrag:()=>{this.endDrag.emit()}}),this.opacity=this.source.listen(o=>o.isDragging()?.4:1)}ngOnDestroy(){this.source.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(p.fD))},e.\u0275cmp=n.Xpm({type:e,selectors:[["drilldown-source"]],outputs:{beginDrag:"beginDrag",endDrag:"endDrag"},decls:4,vars:5,consts:[[3,"dragSource"]],template:function(t,o){1&t&&(n.TgZ(0,"div",0),n.ALo(1,"async"),n.TgZ(2,"p"),n._uU(3,"Drag this!"),n.qZA()()),2&t&&(n.Udp("opacity",n.lcZ(1,3,o.opacity)),n.Q6J("dragSource",o.source))},directives:[$.$d],pipes:[a.Ov],styles:["div[_ngcontent-%COMP%]{border:1px dashed #777;background:#fff;padding:.5rem 1rem;margin-bottom:.5rem;background-color:#fff;width:8rem}div[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{display:inline-block;padding:3px;margin:0}"]}),e})();var F=i(90594),nn=i(42757),tn=i(57350);const k=new(i(2939).v)(tn.o),on=k;var sn=i(11615),f=i(88524),rn=i(60635),ln=i(55065);function w(e,s){return s?t=>(0,sn.z)(s.pipe((0,f.q)(1),(0,rn.l)()),t.pipe(w(e))):(0,ln.z)((t,o)=>e(t,o).pipe((0,f.q)(1),function cn(e){return(0,g.U)(()=>e)}(t)))}var an=i(436);var hn=i(9230),un=i(94796),fn=i(34550);class yn{constructor(s,t){this.type=s,this.item=t}}function vn(e,s,t,o){const r=new v.x,c=e.dropTarget(s,Object.assign(Object.assign({},o),{hover:l=>{r.next(new yn(l.getItemType(),l.getItem())),o.hover&&o.hover(l)}})),m=c.listen(l=>l.isOver()&&l.canDrop()).pipe((0,h.x)(),(0,F.h)(l=>l)),jn=c.listen(l=>l.isOver()).pipe((0,h.x)(),(0,F.h)(l=>!1===l)),In=m.pipe((0,nn.c)(r.pipe(function pn(e,s=k){const t=function gn(e=0,s,t=on){let o=-1;return null!=s&&((0,an.K)(s)?t=s:o=s),new C.y(r=>{let c=function dn(e){return e instanceof Date&&!isNaN(e)}(e)?+e-t.now():e;c<0&&(c=0);let m=0;return t.schedule(function(){r.closed||(r.next(m++),0<=o?this.schedule(void 0,o):r.complete())},c)})}(e,s);return w(()=>t)}(t),function mn(e){return(0,x.e)((s,t)=>{(0,un.Xf)(e).subscribe((0,hn.x)(t,()=>t.complete(),fn.Z)),!t.closed&&s.subscribe(t)})}(jn),(0,f.q)(1)))).subscribe(o.onActivate);return c.add(In),c}const j=function(e){return[e]};function xn(e,s){if(1&e&&n._UZ(0,"drilldown-folder",3),2&e){const t=s.$implicit,o=n.oxw(2);n.Q6J("keys",o.keys.concat(n.VKq(1,j,t)))}}function Cn(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"ul"),n.ALo(2,"async"),n.YNc(3,xn,1,3,"drilldown-folder",2),n.ALo(4,"async"),n.qZA(),n.BQk()),2&e){const t=n.oxw();n.xp6(1),n.ekj("has-children",n.lcZ(2,4,t.anyChildren$)),n.xp6(2),n.Q6J("ngForOf",n.lcZ(4,6,t.children$))("ngForTrackBy",t.tracker)}}function Dn(e,s){if(1&e&&(n.TgZ(0,"b"),n._uU(1),n.qZA()),2&e){const t=n.oxw(2);n.xp6(1),n.hij("",t.ownKey," ...")}}function On(e,s){if(1&e&&n._uU(0),2&e){const t=n.oxw(2);n.hij(" ",t.ownKey," ")}}function An(e,s){if(1&e&&n._UZ(0,"drilldown-folder",3),2&e){const t=s.$implicit,o=n.oxw(3);n.Q6J("keys",o.keys.concat(n.VKq(1,j,t)))}}function Tn(e,s){if(1&e&&(n.TgZ(0,"ul"),n.ALo(1,"async"),n.YNc(2,An,1,3,"drilldown-folder",2),n.ALo(3,"async"),n.qZA()),2&e){const t=n.oxw(2);n.ekj("root",0===t.keys.length)("has-children",n.lcZ(1,6,t.anyChildren$)),n.xp6(2),n.Q6J("ngForOf",n.lcZ(3,8,t.children$))("ngForTrackBy",t.tracker)}}function Zn(e,s){if(1&e){const t=n.EpF();n.TgZ(0,"li"),n.ALo(1,"async"),n.ALo(2,"async"),n.ALo(3,"async"),n.TgZ(4,"div",4),n.NdJ("click",function(){return n.CHM(t),n.oxw().toggle()}),n.YNc(5,Dn,2,1,"b",0),n.ALo(6,"async"),n.YNc(7,On,1,1,"ng-template",null,5,n.W1O),n.qZA(),n.YNc(9,Tn,4,10,"ul",6),n.ALo(10,"async"),n.qZA()}if(2&e){const t=n.MAs(8),o=n.oxw();n.ekj("root",0===o.keys.length)("is-open",n.lcZ(1,12,o.isOpen$))("is-over",n.lcZ(2,14,o.isOver$))("has-children",n.lcZ(3,16,o.anyChildren$)),n.xp6(4),n.Q6J("dropTarget",o.target),n.xp6(1),n.Q6J("ngIf",n.lcZ(6,18,o.anyChildren$))("ngIfElse",t),n.xp6(4),n.Q6J("ngIf",n.lcZ(10,20,o.isOpen$))}}let bn=(()=>{class e{constructor(t,o,r){this.tree=t,this.dnd=o,this.ngZone=r,this.keys=[],this.target=vn(this.dnd,"EMAIL",600,{onActivate:c=>{this.tree.openTransient(this.keys)},drop:c=>{this.tree.drop(this.keys)}}),this.isOver$=this.target.listen(c=>c.isOver()&&c.canDrop())}get ownKey(){return 0===this.keys.length?"<root>":this.keys[this.keys.length-1]}ngOnInit(){this.children$=this.tree.getChildren(this.keys),this.anyChildren$=this.children$.pipe((0,g.U)(t=>t&&t.length>0)),this.isOpen$=this.tree.isOpen(this.keys)}tracker(t,o){return o}toggle(){this.tree.toggle(this.keys)}ngOnDestroy(){this.target.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(u),n.Y36(p.fD),n.Y36(n.R0b))},e.\u0275cmp=n.Xpm({type:e,selectors:[["drilldown-folder"]],inputs:{keys:"keys"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["node",""],[3,"keys",4,"ngFor","ngForOf","ngForTrackBy"],[3,"keys"],[3,"dropTarget","click"],["leaf",""],[3,"root","has-children",4,"ngIf"]],template:function(t,o){if(1&t&&(n.YNc(0,Cn,5,8,"ng-container",0),n.YNc(1,Zn,11,22,"ng-template",null,1,n.W1O)),2&t){const r=n.MAs(2);n.Q6J("ngIf",0===o.keys.length)("ngIfElse",r)}},directives:[a.O5,a.sg,e,$.Li],pipes:[a.Ov],styles:['[_nghost-%COMP%]     *{margin:0;padding:0}[_nghost-%COMP%]     li.has-children{background:lightgoldenrodyellow;cursor:pointer}[_nghost-%COMP%]     li:not(.has-children){cursor:auto;cursor:initial}[_nghost-%COMP%]     li.has-children>div:hover, [_nghost-%COMP%]     li.is-over>div{background:#d1c072}[_nghost-%COMP%]     ul{margin:0 0 0 20px;list-style:none;line-height:2em;font-family:Arial,sans-serif}[_nghost-%COMP%]     li{position:relative;list-style:none;font-size:16px}[_nghost-%COMP%]     li:before{position:absolute;left:-15px;top:0;content:"";display:block;border-left:1px solid #444;height:1em;border-bottom:1px solid #444;width:10px}[_nghost-%COMP%]     li:after{position:absolute;left:-15px;bottom:-7px;content:"";display:block;border-left:1px solid #444;height:100%}[_nghost-%COMP%]     li.root{margin:0 0 0 -20px}[_nghost-%COMP%]     li.root:before{display:none}[_nghost-%COMP%]     li.root:after{display:none}[_nghost-%COMP%]     li:last-child:after{display:none}'],changeDetection:0}),e})();function Mn(e,s){if(1&e&&(n.TgZ(0,"p"),n._uU(1,"Last dropped on "),n.TgZ(2,"code"),n._uU(3),n.qZA()()),2&e){const t=s.ngLet;n.xp6(3),n.hij(" ",t?t.join(" > "):"(never)"," ")}}const $n=function(){return[]};let Fn=(()=>{class e{constructor(t){this.tree=t,this.lastDrop$=this.tree.select(o=>o.lastDrop)}beginDrag(){this.tree.beginDrag()}endDrag(){this.tree.endDrag()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(u))},e.\u0275cmp=n.Xpm({type:e,selectors:[["drilldown-container"]],decls:16,vars:5,consts:[["path","drilldown"],[4,"ngLet"],[3,"beginDrag","endDrag"],[3,"keys"]],template:function(t,o){1&t&&(n._UZ(0,"app-example-link",0),n.TgZ(1,"p"),n._uU(2,"Hover over a folder to temporarily drill down. Click normally on a folder to open or close it."),n.qZA(),n.TgZ(3,"p"),n._uU(4," This example uses a wrapper around "),n.TgZ(5,"code"),n._uU(6,"DndService#dropTarget"),n.qZA(),n._uU(7,", that listens to dnd-core hover events and fires a callback when you have hovered long enough. This is a clean pattern for extending "),n.TgZ(8,"code"),n._uU(9,"@ng-dnd/core"),n.qZA(),n._uU(10," in a reusable way. "),n.qZA(),n.YNc(11,Mn,4,1,"p",1),n.ALo(12,"async"),n.TgZ(13,"p")(14,"drilldown-source",2),n.NdJ("beginDrag",function(){return o.beginDrag()})("endDrag",function(){return o.endDrag()}),n.qZA()(),n._UZ(15,"drilldown-folder",3)),2&t&&(n.xp6(11),n.Q6J("ngLet",n.lcZ(12,2,o.lastDrop$)),n.xp6(4),n.Q6J("keys",n.DdM(4,$n)))},directives:[V.Z,q.h,_,bn],pipes:[a.Ov],styles:["[_nghost-%COMP%]{display:block;min-height:600px}"]}),e})();var kn=i(10009);let wn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({providers:[u],imports:[[a.ez,p.c8,I.Bz.forChild([{path:"",component:Fn}]),kn.g]]}),e})()}}]);