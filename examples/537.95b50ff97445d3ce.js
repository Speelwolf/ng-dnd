"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[537],{28537:(F,l,o)=>{o.r(l),o.d(l,{BasicSortableModule:()=>q});var d=o(17011),g=o(14595),u=o(4730),C=o(62359),x=o(10009),t=o(31385),v=o(74967),T=o(59857),m=o(10231);function b(e,c){1&e&&t.GkF(0)}const Z=function(e){return{$implicit:e}};let h=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275dir=t.lG2({type:e,selectors:[["","cardInner",""]]})}return e})(),D=(()=>{class e{constructor(i,n){this.elRef=i,this.dnd=n,this.beginDrag=new t.vpe,this.endDrag=new t.vpe,this.handleMove=new t.vpe,this.cardSource=this.dnd.dragSource("CARD",{beginDrag:()=>(this.beginDrag.emit(),{id:this.id,index:this.index}),endDrag:r=>{const a=r.didDrop();this.endDrag.emit(a)}}),this.cardTarget=this.dnd.dropTarget("CARD",{hover:r=>{const a=r.getItem().index,s=this.index;if(a===s)return;const p=this.elRef.nativeElement.getBoundingClientRect(),f=(p.bottom-p.top)/2,_=r.getClientOffset().y-p.top;a<s&&_<f||a>s&&_>f||(this.handleMove.emit([a,s]),r.getItem().index=s)}}),this.isDragging$=this.cardSource.listen(r=>r.isDragging()),this.opacity$=this.cardSource.listen(r=>r.isDragging()?.2:1)}moveCard(i,n){this.handleMove.emit([i,n])}ngOnDestroy(){this.cardSource.unsubscribe(),this.cardTarget.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(t.SBq),t.Y36(u.fD))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-card"]],contentQueries:function(n,r,a){if(1&n&&t.Suo(a,h,5,t.Rgc),2&n){let s;t.iGM(s=t.CRH())&&(r.cardInnerTemplate=s.first)}},inputs:{card:"card",index:"index",id:"id",text:"text"},outputs:{beginDrag:"beginDrag",endDrag:"endDrag",handleMove:"handleMove"},decls:4,vars:10,consts:[[1,"card",3,"dropTarget","dragSource"],[1,"border"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0),t.ALo(1,"async"),t.TgZ(2,"div",1),t.YNc(3,b,1,0,"ng-container",2),t.qZA()()),2&n&&(t.Udp("opacity",t.lcZ(1,6,r.opacity$)),t.Q6J("dropTarget",r.cardTarget)("dragSource",r.cardSource),t.xp6(3),t.Q6J("ngTemplateOutlet",r.cardInnerTemplate)("ngTemplateOutletContext",t.VKq(8,Z,r.card)))},dependencies:[d.tP,m.$d,m.Li,d.Ov],styles:[".card[_ngcontent-%COMP%]{margin-bottom:.25rem;background-color:#fff;cursor:move}.border[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px dashed gray}"],changeDetection:0})}return e})();function S(e,c){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const i=c.$implicit,n=t.oxw(2).item;t.xp6(1),t.AsE("",n.index+1," ",i.text,"")}}function y(e,c){if(1&e&&(t.TgZ(0,"app-card",4),t.YNc(1,S,2,2,"span",5),t.qZA()),2&e){const i=t.oxw().item,n=t.oxw();t.Q6J("card",n.findCard(i.id))}}function A(e,c){1&e&&(t.TgZ(0,"div",2),t.YNc(1,y,2,1,"app-card",3),t.qZA()),2&e&&(t.Q6J("ngSwitch",c.$implicit),t.xp6(1),t.Q6J("ngSwitchCase","CARD"))}function M(e,c){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const i=c.$implicit;t.xp6(1),t.Oqu(i.text)}}function U(e,c){if(1&e){const i=t.EpF();t.TgZ(0,"app-card",6),t.NdJ("handleMove",function(r){t.CHM(i);const a=t.oxw();return t.KtG(a.moveCard(r))})("beginDrag",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.beginDrag())})("endDrag",function(r){t.CHM(i);const a=t.oxw();return t.KtG(a.endDrag(r))}),t.YNc(1,M,2,1,"span",5),t.qZA()}if(2&e){const i=c.$implicit;t.Q6J("index",c.index)("id",i.id)("card",i)}}let w=(()=>{class e{constructor(){this.cards=[{id:1,text:"Write a cool JS library"},{id:2,text:"Make it generic enough"},{id:3,text:"Write README"},{id:4,text:"Create some examples"},{id:5,text:"Write a glorious Medium post to promote it (note that this element is taller, and far more important, than the others)"},{id:6,text:"Sit back and relax"}],this.origCards=this.cards}findCard(i){return this.cards.find(n=>n.id===i)}beginDrag(){this.origCards=this.cards.slice(0)}endDrag(i){i||(this.cards=this.origCards)}moveCard([i,n]){const r=this.cards[i];this.cards.splice(i,1),this.cards.splice(n,0,r)}tracker(i,n){return n.id}static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["basic-sortable"]],decls:4,vars:2,consts:[[1,"sorted"],[3,"index","id","card","handleMove","beginDrag","endDrag",4,"ngFor","ngForOf","ngForTrackBy"],[1,"sorted",3,"ngSwitch"],[3,"card",4,"ngSwitchCase"],[3,"card"],[4,"cardInner"],[3,"index","id","card","handleMove","beginDrag","endDrag"]],template:function(n,r){1&n&&(t.TgZ(0,"dnd-preview"),t.YNc(1,A,2,2,"ng-template"),t.qZA(),t.TgZ(2,"div",0),t.YNc(3,U,2,3,"app-card",1),t.qZA()),2&n&&(t.xp6(3),t.Q6J("ngForOf",r.cards)("ngForTrackBy",r.tracker))},dependencies:[d.sg,d.RF,d.n9,T.S,D,h],styles:[".sorted[_ngcontent-%COMP%]{width:100%;max-width:400px}"]})}return e})();const B=function(){return["/sortable","simple"]};let O=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["basic-sortable-container"]],decls:34,vars:2,consts:[["path","basic-sortable"],[3,"routerLink"]],template:function(n,r){1&n&&(t._UZ(0,"app-example-link",0),t.TgZ(1,"p"),t._uU(2,"You can make a sortable by:"),t.qZA(),t.TgZ(3,"ul")(4,"li"),t._uU(5,"giving each card a "),t.TgZ(6,"code"),t._uU(7,"DragSource"),t.qZA(),t._uU(8," and a "),t.TgZ(9,"code"),t._uU(10,"DropTarget"),t.qZA(),t._uU(11,";"),t.qZA(),t.TgZ(12,"li"),t._uU(13," determining when you are hovering on the upper or lower half of a neighbouring card using "),t.TgZ(14,"code"),t._uU(15,"monitor.getClientOffset()"),t.qZA(),t._uU(16,"; "),t.qZA(),t.TgZ(17,"li"),t._uU(18," working out when a reordering is necessary by comparing the index with the item in flight's index; "),t.qZA(),t.TgZ(19,"li"),t._uU(20," bubbling up reordering events, and also beginDrag, endDrag and drop events to a component that controls re-rendering the list; and "),t.qZA(),t.TgZ(21,"li"),t._uU(22,"storing a clone of your list to revert to on endDrag, or commit to on drop"),t.qZA()(),t.TgZ(23,"p"),t._uU(24," If that sounds like too much effort, this pattern is made easy and reusable in "),t.TgZ(25,"code"),t._uU(26,"@ng-dnd/sortable"),t.qZA(),t._uU(27,". You can do it without introducing a new component, too. "),t.qZA(),t.TgZ(28,"p"),t._uU(29," You can compare the source code of this example to equivalent using that abstraction, "),t.TgZ(30,"a",1),t._uU(31,"Simple list"),t.qZA(),t._uU(32,". "),t.qZA(),t._UZ(33,"basic-sortable")),2&n&&(t.xp6(30),t.Q6J("routerLink",t.DdM(1,B)))},dependencies:[g.rH,v.Z,w],encapsulation:2})}return e})(),q=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[d.ez,u.c8,C.XJ,g.Bz.forChild([{path:"",component:O}]),x.g]})}return e})()}}]);