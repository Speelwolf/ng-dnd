"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[294],{64294:(Q,b,i)=>{i.r(b),i.d(b,{KeyboardModule:()=>Y});var h=i(17011),C=i(14595),O=i(4730),k=i(62359),d=i(61569),c=i(16098),a=i(41183),L=i(10009),e=i(31385),T=i(74967),m=i(98048);function p(t){let s=5381;for(let n=0;n<t.length;n++)s=(s<<5)+s+t.charCodeAt(n);return s}let M=(()=>{class t extends((0,m.WV)({id:0,hash:p(""),content:""})){static#e=this.nextId=0;static create(n){return new t({id:t.nextId++,content:n,hash:p(n)})}}return t})();var P=i(67448),l=(()=>{return(t=l||(l={})).SORT="[simple-ngrx] SORT",t.KB_SELECT="[simple-ngrx] KB_SELECT",t.KB_LIFT="[simple-ngrx] KB_LIFT",t.KB_DROP="[simple-ngrx] KB_DROP",t.KB_UP="[simple-ngrx] KB_UP",t.KB_DOWN="[simple-ngrx] KB_DOWN",l;var t})();class B{constructor(s){this.id=s,this.type=l.KB_SELECT}}class U{constructor(){this.type=l.KB_LIFT}}class A{constructor(){this.type=l.KB_DROP}}class K{constructor(){this.type=l.KB_UP}}class _{constructor(){this.type=l.KB_DOWN}}const w=()=>P.fake("/home/mezcal/{{system.fileName}}");class y extends((0,m.WV)({list:(0,m.aV)(Array.from(new Array(6),w).map(M.create)),draggingList:null,flying:null,kbSelected:0,kbLifted:!1})){}function x(t){return t.list.findIndex(s=>s.id===t.kbSelected)}function v(t,s,n){if(n=Math.max(0,Math.min(t.list.count()-1,n)),!t.kbLifted)return t.set("kbSelected",t.list.get(n).id);const r=t.list.get(s);return t.update("list",o=>o.remove(s).insert(n,r))}function F(t=new y,s){switch(s.type){case l.SORT:return function D(t=new y,s){const{index:n,hover:r,data:o}=s.item;switch(s.event){case d.DC.BeginDrag:return t.set("draggingList",t.list.remove(n)).set("flying",s.item).set("kbSelected",s.item.data.id).set("kbLifted",!1);case d.DC.Hover:return t.set("flying",s.item);case d.DC.Drop:return t.set("list",t.draggingList.insert(r.index,o)).delete("draggingList").delete("flying").set("kbSelected",s.item.data.id).set("kbLifted",!1);case d.DC.EndDrag:return t.delete("draggingList").delete("flying").set("kbSelected",s.item.data.id).set("kbLifted",!1);default:return t}}(t,s);case l.KB_SELECT:return t.set("kbSelected",s.id);case l.KB_LIFT:return t.set("kbLifted",!t.kbLifted);case l.KB_DROP:return t.set("kbLifted",!1);case l.KB_UP:{const n=x(t);return v(t,n,n-1)}case l.KB_DOWN:{const n=x(t);return v(t,n,n+1)}}return t}const g=(0,c.ZF)("simple-ngrx"),S=(0,c.P1)(g,t=>{const{flying:s}=t,n=t.draggingList||t.list;if(null!=s){const{hover:r,data:o}=s;return n.insert(r.index,o)}return n}),R=(0,c.P1)(g,t=>t.list),Z=t=>p(t.map(s=>""+s.id+s.hash.toString()).toArray().join(" ")),$=(0,c.P1)(S,Z),I=(0,c.P1)(R,Z),E=(0,c.P1)(g,t=>t.kbSelected),H=(0,c.P1)(g,t=>t.kbLifted?t.kbSelected:-1);var q=i(10231),N=i(97493),J=i(48307);function W(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"tr",3,4),e.NdJ("click",function(){const u=e.CHM(n).$implicit,f=e.oxw();return e.KtG(f.click(u))}),e.ALo(2,"async"),e.ALo(3,"async"),e.ALo(4,"async"),e.TgZ(5,"td",5)(6,"code"),e._uU(7),e.qZA()(),e.TgZ(8,"td"),e._uU(9),e.qZA()()}if(2&t){const n=s.$implicit,r=s.index,o=e.MAs(1),u=e.oxw(),f=e.MAs(1);e.ekj("blob--placeholder",e.lcZ(2,10,o.isDragging$))("blob--selected",n.id===e.lcZ(3,12,u.selected$))("blob--lifted",n.id===e.lcZ(4,14,u.lifted$)),e.Q6J("dndSortableRender",f.contextFor(n,r))("dragSource",o.source),e.xp6(7),e.Oqu(n.hash),e.xp6(2),e.Oqu(n.content)}}let j=(()=>{class t{constructor(n,r){this.store=n,this.hotkeys=r,this.rxSpec=new d.yn(this.store,l.SORT,{type:"BLOB",trackBy:o=>o.id,getList:o=>this.store.select(S)}),this.selected$=this.store.select(E),this.lifted$=this.store.select(H),this.hotkeys.add(new a.qm("enter",o=>(this.store.dispatch(new U),!1),[],"Lift up or put down selected item")),this.hotkeys.add(new a.qm("up",o=>(this.store.dispatch(new K),!1),[],"Move selection or lifted item up")),this.hotkeys.add(new a.qm("down",o=>(this.store.dispatch(new _),!1),[],"Move selection or lifted item down")),this.hotkeys.add(new a.qm("esc",o=>(this.store.dispatch(new A),!1),[],"Put down lifted item"))}click(n){this.store.dispatch(new B(n.id))}static#e=this.\u0275fac=function(r){return new(r||t)(e.Y36(c.yh),e.Y36(a.tm))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["rxsort-sortable"]],decls:11,vars:4,consts:[["dndSortable","",1,"list",3,"spec"],["sortable","dndSortable"],[3,"dndSortableRender","dragSource","blob--placeholder","blob--selected","blob--lifted","click",4,"ngFor","ngForOf"],[3,"dndSortableRender","dragSource","click"],["render","dndSortableRender"],[1,"hash"]],template:function(r,o){if(1&r&&(e.TgZ(0,"table",0,1)(2,"thead")(3,"tr")(4,"th"),e._uU(5,"Hash"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Filename"),e.qZA()()(),e.TgZ(8,"tbody"),e.YNc(9,W,10,16,"tr",2),e.ALo(10,"async"),e.qZA()()),2&r){const u=e.MAs(1);e.Q6J("spec",o.rxSpec),e.xp6(9),e.Q6J("ngForOf",e.lcZ(10,2,u.children$))}},dependencies:[h.sg,q.$d,N.B,J.U,h.Ov],styles:["tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{cursor:move;color:#b73030;background:rgba(142,174,15,.1)}td[_ngcontent-%COMP%]{padding:4px}.blob--selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#d6ddbe}tr.blob--lifted[_ngcontent-%COMP%]{transform:translate(8px)}tr.blob--lifted[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#f9d456}td.hash[_ngcontent-%COMP%]{background:rgba(142,174,15,.3);text-align:right}td.hash[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:none}.blob--placeholder[_ngcontent-%COMP%]{opacity:.4}"],changeDetection:0})}return t})(),z=(()=>{class t{constructor(n){this.store=n,this.unstable$=this.store.select($),this.stable$=this.store.select(I)}static#e=this.\u0275fac=function(r){return new(r||t)(e.Y36(c.yh))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["rxsort-summary"]],decls:10,vars:6,template:function(r,o){1&r&&(e.TgZ(0,"p"),e._uU(1," Hash of the unstable list: "),e.TgZ(2,"code"),e._uU(3),e.ALo(4,"async"),e.qZA(),e._UZ(5,"br"),e._uU(6," Hash of the stable list: "),e.TgZ(7,"code"),e._uU(8),e.ALo(9,"async"),e.qZA()()),2&r&&(e.xp6(3),e.Oqu(e.lcZ(4,2,o.unstable$)),e.xp6(5),e.Oqu(e.lcZ(9,4,o.stable$)))},dependencies:[h.Ov],styles:["p[_ngcontent-%COMP%]{margin-top:0}"]})}return t})(),X=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["rxsort-container"]],decls:24,vars:0,consts:[["path","sortable/keyboard"],[1,"sep"]],template:function(r,o){1&r&&(e._UZ(0,"app-example-link",0),e.TgZ(1,"p"),e._uU(2," This one uses an "),e.TgZ(3,"code"),e._uU(4,"@ngrx/store"),e.qZA(),e._uU(5," with Immutable.js data. This is very convenient, since Immutable.js has its own 'insert' and 'remove' operations. "),e.qZA(),e.TgZ(6,"p"),e._uU(7,"It also is a demo for"),e.qZA(),e.TgZ(8,"ul")(9,"li"),e._uU(10," Sorting overlaid on bare HTML table rows using the "),e.TgZ(11,"code"),e._uU(12,"dndSortable"),e.qZA(),e._uU(13," directive, without intermediate DOM nodes. "),e.qZA(),e.TgZ(14,"li"),e._uU(15," Keyboard driven sorting, using "),e.TgZ(16,"code"),e._uU(17,"angular2-mousetrap"),e.qZA(),e._uU(18,". Try using the arrow keys and enter to lift/put down. "),e.qZA(),e.TgZ(19,"li"),e._uU(20," Selectors based on the 'unstable' / 'in-flight' rendered list, and the 'stable' / 'saved' one. "),e.qZA()(),e._UZ(21,"rxsort-summary")(22,"div",1)(23,"rxsort-sortable"))},dependencies:[T.Z,j,z],styles:[".sep[_ngcontent-%COMP%]{border-bottom:1px solid #999;margin-bottom:8px;max-width:700px}"]})}return t})(),Y=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=e.oAB({type:t});static#n=this.\u0275inj=e.cJS({imports:[h.ez,L.g,O.c8,k.XJ,d.tG,c.Aw.forFeature("simple-ngrx",F),C.Bz.forChild([{path:"",component:X}]),a.mb]})}return t})()}}]);