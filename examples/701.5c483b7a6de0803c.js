"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[701],{81701:(Ln,v,r)=>{r.r(v),r.d(v,{DrilldownModule:()=>wn});var a=r(17011),b=r(14595),p=r(4730),n=r(31385),P=r(65780),U=r(31777),E=r(3562),B=r(71503),d=r(17215),x=r(26109),g=r(94796),C=r(48586),D=r(21221);const J={connector:()=>new x.x};function Q(e,i,t,o){t&&!(0,d.m)(t)&&(o=t);const s=(0,d.m)(t)?t:void 0;return l=>function j(e,i){const t=(0,d.m)(e)?e:()=>e;return(0,d.m)(i)?function Y(e,i=J){const{connector:t}=i;return(0,C.e)((o,s)=>{const l=t();(0,g.Xf)(e(function G(e){return new D.y(i=>e.subscribe(i))}(l))).subscribe(s),s.add(o.subscribe(l))})}(i,{connector:t}):o=>new B.c(o,t)}(new E.t(e,i,o),s)(l)}var R=r(84443),h=r(76801),u=r(48045),K=r(84985);const A="BEGIN_DRAG",O="END_DRAG",T="OPEN_TRANSIENT",Z="DROP",M="TOGGLE";class z{constructor(){this.type=A}}class X{constructor(){this.type=O}}class S{constructor(i){this.keys=i,this.type=T}}class W{constructor(i){this.keys=i,this.type=Z}}class H{constructor(i){this.keys=i,this.type=M}}const $={structure:{Infraction:{Anecdotal:{Clumsily:{},Megalomaniac:{},Neurotic:{}},Basilica:{Salivate:{}},Candid:{Granada:{}}},Magnanimous:{Jalape\u00f1o:{Poppers:{}},Jalape\u00f1o2:{Poppers3:{}}},Byzantine:{Fault:{Tolerance:{}},Armadillo:{Farming:{}}}},open:{Infraction:!0,"Infraction.Basilica":!0,"Infraction.Basilica.Salivate":!0},preDragOpen:{}};let f=(()=>{class e{constructor(){this.actions$=new K.X({type:"@@init"}),this.store$=this.actions$.pipe((0,P.R)(e.reducer,$),(0,U.O)($),Q(),(0,R.x)())}static makeKey(t){return t.join(".")}static toggleSingle(t,o){const s=e.makeKey(o);return Object.assign({},t,{[s]:!t[s]})}static openAllAncestors(t,o){t={...t};for(let s=0;s<o.length;s++)t[e.makeKey(o.slice(0,s+1))]=!0;return t}static reducer(t,o){switch(o.type){case A:return{...t,preDragOpen:t.open};case O:return{...t,open:t.preDragOpen};case T:return{...t,open:e.openAllAncestors(t.preDragOpen,o.keys)};case Z:return{...t,lastDrop:o.keys};case M:return{...t,open:e.toggleSingle(t.open,o.keys)};default:return t}}static recursiveGet(t,o){return 0===o.length?t:e.recursiveGet(t[o[0]],o.slice(0).splice(1))}select(t){return this.store$.pipe((0,h.U)(t),(0,u.x)())}isOpen(t){return this.select(o=>null==t||0===t.length||o.open[e.makeKey(t)])}getChildren(t){return this.select(o=>o).pipe((0,h.U)(o=>{const s=e.recursiveGet(o.structure,t);return Object.keys(s).sort()}))}beginDrag(){this.actions$.next(new z)}endDrag(){this.actions$.next(new X)}toggle(t){this.actions$.next(new H(t))}openTransient(t){this.actions$.next(new S(t))}drop(t){this.actions$.next(new W(t))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();var V=r(74967),q=r(148);var k=r(10231);let _=(()=>{class e{constructor(t){this.dnd=t,this.beginDrag=new n.vpe,this.endDrag=new n.vpe,this.source=this.dnd.dragSource("EMAIL",{beginDrag:()=>(this.beginDrag.emit(),{}),endDrag:()=>{this.endDrag.emit()}}),this.opacity=this.source.listen(o=>o.isDragging()?.4:1)}ngOnDestroy(){this.source.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(p.fD))},e.\u0275cmp=n.Xpm({type:e,selectors:[["drilldown-source"]],outputs:{beginDrag:"beginDrag",endDrag:"endDrag"},decls:4,vars:5,consts:[[3,"dragSource"]],template:function(t,o){1&t&&(n.TgZ(0,"div",0),n.ALo(1,"async"),n.TgZ(2,"p"),n._uU(3,"Drag this!"),n.qZA()()),2&t&&(n.Udp("opacity",n.lcZ(1,3,o.opacity)),n.Q6J("dragSource",o.source))},dependencies:[k.$d,a.Ov],styles:["div[_ngcontent-%COMP%]{border:1px dashed #777;background:#fff;padding:.5rem 1rem;margin-bottom:.5rem;background-color:#fff;width:8rem}div[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{display:inline-block;padding:3px;margin:0}"]}),e})();var w=r(90594),nn=r(42757),tn=r(57350);const I=new(r(2939).v)(tn.o),on=I;var rn=r(11615),m=r(88524),sn=r(60635),ln=r(4340),cn=r(55065);function N(e,i){return i?t=>(0,rn.z)(i.pipe((0,m.q)(1),(0,sn.l)()),t.pipe(N(e))):(0,cn.z)((t,o)=>(0,g.Xf)(e(t,o)).pipe((0,m.q)(1),(0,ln.h)(t)))}var an=r(436);function gn(e,i=I){const t=function pn(e=0,i,t=on){let o=-1;return null!=i&&((0,an.K)(i)?t=i:o=i),new D.y(s=>{let l=function dn(e){return e instanceof Date&&!isNaN(e)}(e)?+e-t.now():e;l<0&&(l=0);let y=0;return t.schedule(function(){s.closed||(s.next(y++),0<=o?this.schedule(void 0,o):s.complete())},l)})}(e,i);return N(()=>t)}var hn=r(9230),un=r(34550);class mn{constructor(i,t){this.type=i,this.item=t}}const L=function(e){return[e]};function vn(e,i){if(1&e&&n._UZ(0,"drilldown-folder",3),2&e){const t=i.$implicit,o=n.oxw(2);n.Q6J("keys",o.keys.concat(n.VKq(1,L,t)))}}function xn(e,i){if(1&e&&(n.ynx(0),n.TgZ(1,"ul"),n.ALo(2,"async"),n.YNc(3,vn,1,3,"drilldown-folder",2),n.ALo(4,"async"),n.qZA(),n.BQk()),2&e){const t=n.oxw();n.xp6(1),n.ekj("has-children",n.lcZ(2,4,t.anyChildren$)),n.xp6(2),n.Q6J("ngForOf",n.lcZ(4,6,t.children$))("ngForTrackBy",t.tracker)}}function Cn(e,i){if(1&e&&(n.TgZ(0,"b"),n._uU(1),n.qZA()),2&e){const t=n.oxw(2);n.xp6(1),n.hij("",t.ownKey," ...")}}function Dn(e,i){if(1&e&&n._uU(0),2&e){const t=n.oxw(2);n.hij(" ",t.ownKey," ")}}function An(e,i){if(1&e&&n._UZ(0,"drilldown-folder",3),2&e){const t=i.$implicit,o=n.oxw(3);n.Q6J("keys",o.keys.concat(n.VKq(1,L,t)))}}function On(e,i){if(1&e&&(n.TgZ(0,"ul"),n.ALo(1,"async"),n.YNc(2,An,1,3,"drilldown-folder",2),n.ALo(3,"async"),n.qZA()),2&e){const t=n.oxw(2);n.ekj("root",0===t.keys.length)("has-children",n.lcZ(1,6,t.anyChildren$)),n.xp6(2),n.Q6J("ngForOf",n.lcZ(3,8,t.children$))("ngForTrackBy",t.tracker)}}function Tn(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"li"),n.ALo(1,"async"),n.ALo(2,"async"),n.ALo(3,"async"),n.TgZ(4,"div",4),n.NdJ("click",function(){n.CHM(t);const s=n.oxw();return n.KtG(s.toggle())}),n.YNc(5,Cn,2,1,"b",0),n.ALo(6,"async"),n.YNc(7,Dn,1,1,"ng-template",null,5,n.W1O),n.qZA(),n.YNc(9,On,4,10,"ul",6),n.ALo(10,"async"),n.qZA()}if(2&e){const t=n.MAs(8),o=n.oxw();n.ekj("root",0===o.keys.length)("is-open",n.lcZ(1,12,o.isOpen$))("is-over",n.lcZ(2,14,o.isOver$))("has-children",n.lcZ(3,16,o.anyChildren$)),n.xp6(4),n.Q6J("dropTarget",o.target),n.xp6(1),n.Q6J("ngIf",n.lcZ(6,18,o.anyChildren$))("ngIfElse",t),n.xp6(4),n.Q6J("ngIf",n.lcZ(10,20,o.isOpen$))}}let Zn=(()=>{class e{get ownKey(){return 0===this.keys.length?"<root>":this.keys[this.keys.length-1]}constructor(t,o,s){this.tree=t,this.dnd=o,this.ngZone=s,this.keys=[],this.target=function yn(e,i,t,o){const s=new x.x,l=e.dropTarget(i,{...o,hover:c=>{s.next(new mn(c.getItemType(),c.getItem())),o.hover&&o.hover(c)}}),y=l.listen(c=>c.isOver()&&c.canDrop()).pipe((0,u.x)(),(0,w.h)(c=>c)),In=l.listen(c=>c.isOver()).pipe((0,u.x)(),(0,w.h)(c=>!1===c)),Nn=y.pipe((0,nn.c)(s.pipe(gn(t),function fn(e){return(0,C.e)((i,t)=>{(0,g.Xf)(e).subscribe((0,hn.x)(t,()=>t.complete(),un.Z)),!t.closed&&i.subscribe(t)})}(In),(0,m.q)(1)))).subscribe(o.onActivate);return l.add(Nn),l}(this.dnd,"EMAIL",600,{onActivate:l=>{this.tree.openTransient(this.keys)},drop:l=>{this.tree.drop(this.keys)}}),this.isOver$=this.target.listen(l=>l.isOver()&&l.canDrop())}ngOnInit(){this.children$=this.tree.getChildren(this.keys),this.anyChildren$=this.children$.pipe((0,h.U)(t=>t&&t.length>0)),this.isOpen$=this.tree.isOpen(this.keys)}tracker(t,o){return o}toggle(){this.tree.toggle(this.keys)}ngOnDestroy(){this.target.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(f),n.Y36(p.fD),n.Y36(n.R0b))},e.\u0275cmp=n.Xpm({type:e,selectors:[["drilldown-folder"]],inputs:{keys:"keys"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["node",""],[3,"keys",4,"ngFor","ngForOf","ngForTrackBy"],[3,"keys"],[3,"dropTarget","click"],["leaf",""],[3,"root","has-children",4,"ngIf"]],template:function(t,o){if(1&t&&(n.YNc(0,xn,5,8,"ng-container",0),n.YNc(1,Tn,11,22,"ng-template",null,1,n.W1O)),2&t){const s=n.MAs(2);n.Q6J("ngIf",0===o.keys.length)("ngIfElse",s)}},dependencies:[a.sg,a.O5,k.Li,e,a.Ov],styles:['[_nghost-%COMP%]     *{margin:0;padding:0}[_nghost-%COMP%]     li.has-children{background:lightgoldenrodyellow;cursor:pointer}[_nghost-%COMP%]     li:not(.has-children){cursor:initial}[_nghost-%COMP%]     li.has-children>div:hover, [_nghost-%COMP%]     li.is-over>div{background:#d1c072}[_nghost-%COMP%]     ul{margin:0 0 0 20px;list-style:none;line-height:2em;font-family:Arial,sans-serif}[_nghost-%COMP%]     li{position:relative;list-style:none;font-size:16px}[_nghost-%COMP%]     li:before{position:absolute;left:-15px;top:0;content:"";display:block;border-left:1px solid #444;height:1em;border-bottom:1px solid #444;width:10px}[_nghost-%COMP%]     li:after{position:absolute;left:-15px;bottom:-7px;content:"";display:block;border-left:1px solid #444;height:100%}[_nghost-%COMP%]     li.root{margin:0 0 0 -20px}[_nghost-%COMP%]     li.root:before{display:none}[_nghost-%COMP%]     li.root:after{display:none}[_nghost-%COMP%]     li:last-child:after{display:none}'],changeDetection:0}),e})();function Mn(e,i){if(1&e&&(n.TgZ(0,"p"),n._uU(1," Last dropped on "),n.TgZ(2,"code"),n._uU(3),n.qZA()()),2&e){const t=i.ngLet;n.xp6(3),n.hij(" ",t?t.join(" > "):"(never)"," ")}}const $n=function(){return[]};let Fn=(()=>{class e{constructor(t){this.tree=t,this.lastDrop$=this.tree.select(o=>o.lastDrop)}beginDrag(){this.tree.beginDrag()}endDrag(){this.tree.endDrag()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(f))},e.\u0275cmp=n.Xpm({type:e,selectors:[["drilldown-container"]],decls:16,vars:5,consts:[["path","drilldown"],[4,"ngLet"],[3,"beginDrag","endDrag"],[3,"keys"]],template:function(t,o){1&t&&(n._UZ(0,"app-example-link",0),n.TgZ(1,"p"),n._uU(2," Hover over a folder to temporarily drill down. Click normally on a folder to open or close it. "),n.qZA(),n.TgZ(3,"p"),n._uU(4," This example uses a wrapper around "),n.TgZ(5,"code"),n._uU(6,"DndService#dropTarget"),n.qZA(),n._uU(7,", that listens to dnd-core hover events and fires a callback when you have hovered long enough. This is a clean pattern for extending "),n.TgZ(8,"code"),n._uU(9,"@ng-dnd/core"),n.qZA(),n._uU(10," in a reusable way. "),n.qZA(),n.YNc(11,Mn,4,1,"p",1),n.ALo(12,"async"),n.TgZ(13,"p")(14,"drilldown-source",2),n.NdJ("beginDrag",function(){return o.beginDrag()})("endDrag",function(){return o.endDrag()}),n.qZA()(),n._UZ(15,"drilldown-folder",3)),2&t&&(n.xp6(11),n.Q6J("ngLet",n.lcZ(12,2,o.lastDrop$)),n.xp6(4),n.Q6J("keys",n.DdM(4,$n)))},dependencies:[V.Z,q.h,_,Zn,a.Ov],styles:["[_nghost-%COMP%]{display:block;min-height:600px}"]}),e})();var kn=r(10009);let wn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({providers:[f],imports:[a.ez,p.c8,b.Bz.forChild([{path:"",component:Fn}]),kn.g]}),e})()}}]);