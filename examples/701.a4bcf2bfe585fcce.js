"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[701],{81701:(Ln,v,i)=>{i.r(v),i.d(v,{DrilldownModule:()=>wn});var l=i(17011),b=i(14595),p=i(4730),n=i(31385),P=i(65780),U=i(31777),E=i(3562),B=i(71503),d=i(17215),x=i(26109),g=i(94796),D=i(48586),C=i(21221);const J={connector:()=>new x.x};function Q(e,s,t,o){t&&!(0,d.m)(t)&&(o=t);const r=(0,d.m)(t)?t:void 0;return c=>function j(e,s){const t=(0,d.m)(e)?e:()=>e;return(0,d.m)(s)?function Y(e,s=J){const{connector:t}=s;return(0,D.e)((o,r)=>{const c=t();(0,g.Xf)(e(function G(e){return new C.y(s=>e.subscribe(s))}(c))).subscribe(r),r.add(o.subscribe(c))})}(s,{connector:t}):o=>new B.c(o,t)}(new E.t(e,s,o),r)(c)}var R=i(84443),h=i(76801),u=i(48045),K=i(84985);const A="BEGIN_DRAG",O="END_DRAG",T="OPEN_TRANSIENT",Z="DROP",$="TOGGLE";class z{constructor(){this.type=A}}class X{constructor(){this.type=O}}class W{constructor(s){this.keys=s,this.type=T}}class H{constructor(s){this.keys=s,this.type=Z}}class S{constructor(s){this.keys=s,this.type=$}}const M={structure:{Infraction:{Anecdotal:{Clumsily:{},Megalomaniac:{},Neurotic:{}},Basilica:{Salivate:{}},Candid:{Granada:{}}},Magnanimous:{Jalape\u00f1o:{Poppers:{}},Jalape\u00f1o2:{Poppers3:{}}},Byzantine:{Fault:{Tolerance:{}},Armadillo:{Farming:{}}}},open:{Infraction:!0,"Infraction.Basilica":!0,"Infraction.Basilica.Salivate":!0},preDragOpen:{}};let f=(()=>{class e{constructor(){this.actions$=new K.X({type:"@@init"}),this.store$=this.actions$.pipe((0,P.R)(e.reducer,M),(0,U.O)(M),Q(),(0,R.x)())}static makeKey(t){return t.join(".")}static toggleSingle(t,o){const r=e.makeKey(o);return Object.assign({},t,{[r]:!t[r]})}static openAllAncestors(t,o){t={...t};for(let r=0;r<o.length;r++)t[e.makeKey(o.slice(0,r+1))]=!0;return t}static reducer(t,o){switch(o.type){case A:return{...t,preDragOpen:t.open};case O:return{...t,open:t.preDragOpen};case T:return{...t,open:e.openAllAncestors(t.preDragOpen,o.keys)};case Z:return{...t,lastDrop:o.keys};case $:return{...t,open:e.toggleSingle(t.open,o.keys)};default:return t}}static recursiveGet(t,o){return 0===o.length?t:e.recursiveGet(t[o[0]],o.slice(0).splice(1))}select(t){return this.store$.pipe((0,h.U)(t),(0,u.x)())}isOpen(t){return this.select(o=>null==t||0===t.length||o.open[e.makeKey(t)])}getChildren(t){return this.select(o=>o).pipe((0,h.U)(o=>{const r=e.recursiveGet(o.structure,t);return Object.keys(r).sort()}))}beginDrag(){this.actions$.next(new z)}endDrag(){this.actions$.next(new X)}toggle(t){this.actions$.next(new S(t))}openTransient(t){this.actions$.next(new W(t))}drop(t){this.actions$.next(new H(t))}static#n=this.\u0275fac=function(o){return new(o||e)};static#t=this.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac})}return e})();var V=i(74967),q=i(148);var F=i(10231);let _=(()=>{class e{constructor(t){this.dnd=t,this.beginDrag=new n.vpe,this.endDrag=new n.vpe,this.source=this.dnd.dragSource("EMAIL",{beginDrag:()=>(this.beginDrag.emit(),{}),endDrag:()=>{this.endDrag.emit()}}),this.opacity=this.source.listen(o=>o.isDragging()?.4:1)}ngOnDestroy(){this.source.unsubscribe()}static#n=this.\u0275fac=function(o){return new(o||e)(n.Y36(p.fD))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["drilldown-source"]],outputs:{beginDrag:"beginDrag",endDrag:"endDrag"},decls:4,vars:5,consts:[[3,"dragSource"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0),n.ALo(1,"async"),n.TgZ(2,"p"),n._uU(3,"Drag this!"),n.qZA()()),2&o&&(n.Udp("opacity",n.lcZ(1,3,r.opacity)),n.Q6J("dragSource",r.source))},dependencies:[F.$d,l.Ov],styles:["div[_ngcontent-%COMP%]{border:1px dashed #777;background:#fff;padding:.5rem 1rem;margin-bottom:.5rem;background-color:#fff;width:8rem}div[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{display:inline-block;padding:3px;margin:0}"]})}return e})();var w=i(90594),nn=i(42757),tn=i(57350);const I=new(i(2939).v)(tn.o),on=I;var sn=i(11615),y=i(88524),rn=i(60635),cn=i(4340),an=i(55065);function N(e,s){return s?t=>(0,sn.z)(s.pipe((0,y.q)(1),(0,rn.l)()),t.pipe(N(e))):(0,an.z)((t,o)=>(0,g.Xf)(e(t,o)).pipe((0,y.q)(1),(0,cn.h)(t)))}var ln=i(436);function gn(e,s=I){const t=function pn(e=0,s,t=on){let o=-1;return null!=s&&((0,ln.K)(s)?t=s:o=s),new C.y(r=>{let c=function dn(e){return e instanceof Date&&!isNaN(e)}(e)?+e-t.now():e;c<0&&(c=0);let m=0;return t.schedule(function(){r.closed||(r.next(m++),0<=o?this.schedule(void 0,o):r.complete())},c)})}(e,s);return N(()=>t)}var hn=i(9230),un=i(34550);class yn{constructor(s,t){this.type=s,this.item=t}}const L=function(e){return[e]};function vn(e,s){if(1&e&&n._UZ(0,"drilldown-folder",3),2&e){const t=s.$implicit,o=n.oxw(2);n.Q6J("keys",o.keys.concat(n.VKq(1,L,t)))}}function xn(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"ul"),n.ALo(2,"async"),n.YNc(3,vn,1,3,"drilldown-folder",2),n.ALo(4,"async"),n.qZA(),n.BQk()),2&e){const t=n.oxw();n.xp6(1),n.ekj("has-children",n.lcZ(2,4,t.anyChildren$)),n.xp6(2),n.Q6J("ngForOf",n.lcZ(4,6,t.children$))("ngForTrackBy",t.tracker)}}function Dn(e,s){if(1&e&&(n.TgZ(0,"b"),n._uU(1),n.qZA()),2&e){const t=n.oxw(2);n.xp6(1),n.hij("",t.ownKey," ...")}}function Cn(e,s){if(1&e&&n._uU(0),2&e){const t=n.oxw(2);n.hij(" ",t.ownKey," ")}}function An(e,s){if(1&e&&n._UZ(0,"drilldown-folder",3),2&e){const t=s.$implicit,o=n.oxw(3);n.Q6J("keys",o.keys.concat(n.VKq(1,L,t)))}}function On(e,s){if(1&e&&(n.TgZ(0,"ul"),n.ALo(1,"async"),n.YNc(2,An,1,3,"drilldown-folder",2),n.ALo(3,"async"),n.qZA()),2&e){const t=n.oxw(2);n.ekj("root",0===t.keys.length)("has-children",n.lcZ(1,6,t.anyChildren$)),n.xp6(2),n.Q6J("ngForOf",n.lcZ(3,8,t.children$))("ngForTrackBy",t.tracker)}}function Tn(e,s){if(1&e){const t=n.EpF();n.TgZ(0,"li"),n.ALo(1,"async"),n.ALo(2,"async"),n.ALo(3,"async"),n.TgZ(4,"div",4),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.toggle())}),n.YNc(5,Dn,2,1,"b",0),n.ALo(6,"async"),n.YNc(7,Cn,1,1,"ng-template",null,5,n.W1O),n.qZA(),n.YNc(9,On,4,10,"ul",6),n.ALo(10,"async"),n.qZA()}if(2&e){const t=n.MAs(8),o=n.oxw();n.ekj("root",0===o.keys.length)("is-open",n.lcZ(1,12,o.isOpen$))("is-over",n.lcZ(2,14,o.isOver$))("has-children",n.lcZ(3,16,o.anyChildren$)),n.xp6(4),n.Q6J("dropTarget",o.target),n.xp6(1),n.Q6J("ngIf",n.lcZ(6,18,o.anyChildren$))("ngIfElse",t),n.xp6(4),n.Q6J("ngIf",n.lcZ(10,20,o.isOpen$))}}let Zn=(()=>{class e{get ownKey(){return 0===this.keys.length?"<root>":this.keys[this.keys.length-1]}constructor(t,o,r){this.tree=t,this.dnd=o,this.ngZone=r,this.keys=[],this.target=function mn(e,s,t,o){const r=new x.x,c=e.dropTarget(s,{...o,hover:a=>{r.next(new yn(a.getItemType(),a.getItem())),o.hover&&o.hover(a)}}),m=c.listen(a=>a.isOver()&&a.canDrop()).pipe((0,u.x)(),(0,w.h)(a=>a)),In=c.listen(a=>a.isOver()).pipe((0,u.x)(),(0,w.h)(a=>!1===a)),Nn=m.pipe((0,nn.c)(r.pipe(gn(t),function fn(e){return(0,D.e)((s,t)=>{(0,g.Xf)(e).subscribe((0,hn.x)(t,()=>t.complete(),un.Z)),!t.closed&&s.subscribe(t)})}(In),(0,y.q)(1)))).subscribe(o.onActivate);return c.add(Nn),c}(this.dnd,"EMAIL",600,{onActivate:c=>{this.tree.openTransient(this.keys)},drop:c=>{this.tree.drop(this.keys)}}),this.isOver$=this.target.listen(c=>c.isOver()&&c.canDrop())}ngOnInit(){this.children$=this.tree.getChildren(this.keys),this.anyChildren$=this.children$.pipe((0,h.U)(t=>t&&t.length>0)),this.isOpen$=this.tree.isOpen(this.keys)}tracker(t,o){return o}toggle(){this.tree.toggle(this.keys)}ngOnDestroy(){this.target.unsubscribe()}static#n=this.\u0275fac=function(o){return new(o||e)(n.Y36(f),n.Y36(p.fD),n.Y36(n.R0b))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["drilldown-folder"]],inputs:{keys:"keys"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["node",""],[3,"keys",4,"ngFor","ngForOf","ngForTrackBy"],[3,"keys"],[3,"dropTarget","click"],["leaf",""],[3,"root","has-children",4,"ngIf"]],template:function(o,r){if(1&o&&(n.YNc(0,xn,5,8,"ng-container",0),n.YNc(1,Tn,11,22,"ng-template",null,1,n.W1O)),2&o){const c=n.MAs(2);n.Q6J("ngIf",0===r.keys.length)("ngIfElse",c)}},dependencies:[l.sg,l.O5,F.Li,e,l.Ov],styles:['[_nghost-%COMP%]     *{margin:0;padding:0}[_nghost-%COMP%]     li.has-children{background:lightgoldenrodyellow;cursor:pointer}[_nghost-%COMP%]     li:not(.has-children){cursor:initial}[_nghost-%COMP%]     li.has-children>div:hover, [_nghost-%COMP%]     li.is-over>div{background:#d1c072}[_nghost-%COMP%]     ul{margin:0 0 0 20px;list-style:none;line-height:2em;font-family:Arial,sans-serif}[_nghost-%COMP%]     li{position:relative;list-style:none;font-size:16px}[_nghost-%COMP%]     li:before{position:absolute;left:-15px;top:0;content:"";display:block;border-left:1px solid #444;height:1em;border-bottom:1px solid #444;width:10px}[_nghost-%COMP%]     li:after{position:absolute;left:-15px;bottom:-7px;content:"";display:block;border-left:1px solid #444;height:100%}[_nghost-%COMP%]     li.root{margin:0 0 0 -20px}[_nghost-%COMP%]     li.root:before{display:none}[_nghost-%COMP%]     li.root:after{display:none}[_nghost-%COMP%]     li:last-child:after{display:none}'],changeDetection:0})}return e})();function $n(e,s){if(1&e&&(n.TgZ(0,"p"),n._uU(1," Last dropped on "),n.TgZ(2,"code"),n._uU(3),n.qZA()()),2&e){const t=s.ngLet;n.xp6(3),n.hij(" ",t?t.join(" > "):"(never)"," ")}}const Mn=function(){return[]};let kn=(()=>{class e{constructor(t){this.tree=t,this.lastDrop$=this.tree.select(o=>o.lastDrop)}beginDrag(){this.tree.beginDrag()}endDrag(){this.tree.endDrag()}static#n=this.\u0275fac=function(o){return new(o||e)(n.Y36(f))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["drilldown-container"]],decls:16,vars:5,consts:[["path","drilldown"],[4,"ngLet"],[3,"beginDrag","endDrag"],[3,"keys"]],template:function(o,r){1&o&&(n._UZ(0,"app-example-link",0),n.TgZ(1,"p"),n._uU(2," Hover over a folder to temporarily drill down. Click normally on a folder to open or close it. "),n.qZA(),n.TgZ(3,"p"),n._uU(4," This example uses a wrapper around "),n.TgZ(5,"code"),n._uU(6,"DndService#dropTarget"),n.qZA(),n._uU(7,", that listens to dnd-core hover events and fires a callback when you have hovered long enough. This is a clean pattern for extending "),n.TgZ(8,"code"),n._uU(9,"@ng-dnd/core"),n.qZA(),n._uU(10," in a reusable way. "),n.qZA(),n.YNc(11,$n,4,1,"p",1),n.ALo(12,"async"),n.TgZ(13,"p")(14,"drilldown-source",2),n.NdJ("beginDrag",function(){return r.beginDrag()})("endDrag",function(){return r.endDrag()}),n.qZA()(),n._UZ(15,"drilldown-folder",3)),2&o&&(n.xp6(11),n.Q6J("ngLet",n.lcZ(12,2,r.lastDrop$)),n.xp6(4),n.Q6J("keys",n.DdM(4,Mn)))},dependencies:[V.Z,q.h,_,Zn,l.Ov],styles:["[_nghost-%COMP%]{display:block;min-height:600px}"]})}return e})();var Fn=i(10009);let wn=(()=>{class e{static#n=this.\u0275fac=function(o){return new(o||e)};static#t=this.\u0275mod=n.oAB({type:e});static#e=this.\u0275inj=n.cJS({providers:[f],imports:[l.ez,p.c8,b.Bz.forChild([{path:"",component:kn}]),Fn.g]})}return e})()}}]);