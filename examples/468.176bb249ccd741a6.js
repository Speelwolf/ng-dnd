"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[468],{48468:(L,g,s)=>{s.r(g),s.d(g,{DragLayerModule:()=>w});var r=s(17011),u=s(14595),l=s(4730),t=s(31385),h=s(74967),f=s(90594),x=s(76801);let d=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-box"]],inputs:{title:"title"},decls:2,vars:1,template:function(e,o){1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu(o.title))},styles:["div[_ngcontent-%COMP%]{border:1px dashed grey;cursor:move;padding:.5rem 1rem}"]})}return n})(),C=(()=>{class n{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-box-drag-preview"]],inputs:{title:"title"},decls:2,vars:1,consts:[[1,"phresh"],[3,"title"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-box",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("title",o.title))},dependencies:[d],styles:["[_nghost-%COMP%]{display:inline-block}@keyframes _ngcontent-%COMP%_animatedBackground{0%{background:yellow}to{background:white}}.phresh[_ngcontent-%COMP%]{background:white;transform:rotate(-10deg);overflow:hidden;animation-name:_ngcontent-%COMP%_animatedBackground;animation-duration:.7s;animation-iteration-count:infinite;animation-timing-function:linear;animation-direction:alternate}"]})}return n})();function v(n,c){if(1&n&&(t.ynx(0),t._UZ(1,"app-box-drag-preview",5),t.BQk()),2&n){const i=t.oxw(2).ngIf;t.xp6(1),t.Q6J("title",i.item.title)}}function D(n,c){if(1&n&&(t.TgZ(0,"div",2),t.ALo(1,"async"),t.ynx(2,3),t.YNc(3,v,2,1,"ng-container",4),t.BQk(),t.qZA()),2&n){const i=t.oxw().ngIf,e=t.oxw();t.Q6J("ngStyle",t.lcZ(1,3,e.forStyle$)),t.xp6(2),t.Q6J("ngSwitch",i.itemType),t.xp6(1),t.Q6J("ngSwitchCase","BOX")}}function b(n,c){if(1&n&&(t.ynx(0),t.YNc(1,D,4,5,"div",1),t.BQk()),2&n){const i=c.ngIf;t.xp6(1),t.Q6J("ngIf",i.isDragging)}}let T=(()=>{class n{constructor(i){this.dnd=i,this.dragLayer=this.dnd.dragLayer(),this.collect$=this.dragLayer.listen(e=>({item:e.getItem(),itemType:e.getItemType(),isDragging:e.isDragging(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset()})),this.forStyle$=this.collect$.pipe((0,f.h)(e=>e.isDragging),(0,x.U)(e=>this.getItemStyles(e))),this.snapToGrid=!1}ngOnInit(){}ngOnDestroy(){this.dragLayer.unsubscribe()}getItemStyles({initialOffset:i,currentOffset:e}){if(!i||!e)return{display:"none"};let{x:o,y:a}=e;this.snapToGrid&&(o-=i.x,a-=i.y,[o,a]=function y(n,c){return[32*Math.round(n/32),32*Math.round(c/32)]}(o,a),o+=i.x,a+=i.y);const p=`translate(${o}px, ${a}px)`;return{transform:p,WebkitTransform:p}}static#t=this.\u0275fac=function(e){return new(e||n)(t.Y36(l.fD))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-custom-drag-layer"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"ngStyle",4,"ngIf"],[3,"ngStyle"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"title"]],template:function(e,o){1&e&&(t.YNc(0,b,2,1,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,o.collect$))},dependencies:[r.O5,r.PC,r.RF,r.n9,C,r.Ov],styles:["[_nghost-%COMP%]{display:block;position:fixed;pointer-events:none;z-index:100;left:0;top:0;width:100%;height:100%}"],changeDetection:0})}return n})();var m=s(10231),S=s(41493);let O=(()=>{class n{constructor(i){this.dnd=i,this.source=this.dnd.dragSource("BOX",{beginDrag:()=>{const{id:e,title:o,left:a,top:p}=this;return{id:e,title:o,left:a,top:p}}}),this.isDragging$=this.source.listen(e=>e.isDragging())}ngOnInit(){this.source.connectDragPreview((0,S.r)(),{captureDraggingState:!0})}ngOnDestroy(){this.source.unsubscribe()}getStyles(i){const{left:e,top:o}=this,a=`translate3d(${e}px, ${o}px, 0)`;return{position:"absolute",transform:a,WebkitTransform:a,opacity:i?0:null,height:i?0:null}}static#t=this.\u0275fac=function(e){return new(e||n)(t.Y36(l.fD))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-draggable-box"]],inputs:{id:"id",title:"title",left:"left",top:"top"},decls:3,vars:5,consts:[[1,"draggable-box",3,"dragSource","ngStyle"],[3,"title"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.ALo(1,"async"),t._UZ(2,"app-box",1),t.qZA()),2&e&&(t.Q6J("dragSource",o.source)("ngStyle",o.getStyles(!!t.lcZ(1,3,o.isDragging$))),t.xp6(2),t.Q6J("title",o.title))},dependencies:[r.PC,m.$d,d,r.Ov],encapsulation:2,changeDetection:0})}return n})(),I=(()=>{class n{constructor(i){this.dnd=i,this.x=30,this.y=90,this.styles={minHeight:"300px",maxWidth:"400px",maxHeight:"400px",width:"100%",height:"100%",boxSizing:"border-box",border:"1px solid black",position:"relative"},this.boxTarget=this.dnd.dropTarget("BOX",{drop:e=>{const o=e.getDifferenceFromInitialOffset(),a=e.getItem();this.moveBox(a.id,a.left+o.x,a.top+o.y)}})}moveBox(i,e,o){this.x=e,this.y=o}ngOnInit(){}ngOnDestroy(){this.boxTarget.unsubscribe()}static#t=this.\u0275fac=function(e){return new(e||n)(t.Y36(l.fD))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-drag-container"]],decls:2,vars:5,consts:[[3,"ngStyle","dropTarget"],["title","this box is titled",3,"left","top","id"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-draggable-box",1),t.qZA()),2&e&&(t.Q6J("ngStyle",o.styles)("dropTarget",o.boxTarget),t.xp6(1),t.Q6J("left",o.x)("top",o.y)("id",23))},dependencies:[r.PC,m.Li,O],encapsulation:2})}return n})(),Z=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-drag-layer-container"]],decls:3,vars:0,consts:[["path","drag-layer"]],template:function(e,o){1&e&&t._UZ(0,"app-example-link",0)(1,"app-custom-drag-layer")(2,"app-drag-container")},dependencies:[h.Z,T,I],encapsulation:2})}return n})();var B=s(10009);let w=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[r.ez,l.c8,u.Bz.forChild([{path:"",component:Z}]),B.g]})}return n})()}}]);